<!doctype html>
<html ⚡ lang="ja" data-theme="light">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="preconnect dns-prefetch" href="//cdn.ampproject.org" crossorigin>
    <link rel="preconnect dns-prefetch" href="//uwabami.github.io/" crossorigin>
    <!-- amp preload -->
    <link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js">
    <link rel="preload" as="font" type="font/woff2" href="/assets/fonts/ComicNeueSubset.woff2" crossorigin>
    <!-- end amp preload -->
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-geo" src="https://cdn.ampproject.org/v0/amp-geo-0.1.js"></script>
    <script async custom-element="amp-consent" src="https://cdn.ampproject.org/v0/amp-consent-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
    <style amp-custom>:root{--font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu", "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--line-height: 1.5;--font-weight: 400;--font-size: 16px;--border-radius: 0.25rem;--border-width: 1px;--outline-width: 3px;--spacing: 1rem;--typography-spacing-vertical: 1.5rem;--block-spacing-vertical: calc(var(--spacing) * 2);--block-spacing-horizontal: var(--spacing);--grid-spacing-vertical: 0;--grid-spacing-horizontal: var(--spacing);--form-element-spacing-vertical: 0.75rem;--form-element-spacing-horizontal: 1rem;--nav-element-spacing-vertical: 1rem;--nav-element-spacing-horizontal: 0.5rem;--nav-link-spacing-vertical: 0.5rem;--nav-link-spacing-horizontal: 0.5rem;--form-label-font-weight: var(--font-weight);--transition: 0.2s ease-in-out;--modal-overlay-backdrop-filter: blur(0.25rem)}@media(min-width: 576px){:root{--font-size: 17px}}@media(min-width: 768px){:root{--font-size: 18px}}@media(min-width: 992px){:root{--font-size: 19px}}@media(min-width: 1200px){:root{--font-size: 20px}}@media(min-width: 576px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 2.5)}}@media(min-width: 768px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 3)}}@media(min-width: 992px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 3.5)}}@media(min-width: 1200px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 4)}}@media(min-width: 576px){article{--block-spacing-horizontal: calc(var(--spacing) * 1.25)}}@media(min-width: 768px){article{--block-spacing-horizontal: calc(var(--spacing) * 1.5)}}@media(min-width: 992px){article{--block-spacing-horizontal: calc(var(--spacing) * 1.75)}}@media(min-width: 1200px){article{--block-spacing-horizontal: calc(var(--spacing) * 2)}}dialog>article{--block-spacing-vertical: calc(var(--spacing) * 2);--block-spacing-horizontal: var(--spacing)}@media(min-width: 576px){dialog>article{--block-spacing-vertical: calc(var(--spacing) * 2.5);--block-spacing-horizontal: calc(var(--spacing) * 1.25)}}@media(min-width: 768px){dialog>article{--block-spacing-vertical: calc(var(--spacing) * 3);--block-spacing-horizontal: calc(var(--spacing) * 1.5)}}a{--text-decoration: none}a.secondary,a.contrast{--text-decoration: underline}small{--font-size: 0.875em}h1,h2,h3,h4,h5,h6{--font-weight: 700}h1{--font-size: 2rem;--typography-spacing-vertical: 3rem}h2{--font-size: 1.75rem;--typography-spacing-vertical: 2.625rem}h3{--font-size: 1.5rem;--typography-spacing-vertical: 2.25rem}h4{--font-size: 1.25rem;--typography-spacing-vertical: 1.874rem}h5{--font-size: 1.125rem;--typography-spacing-vertical: 1.6875rem}[type=checkbox],[type=radio]{--border-width: 2px}[type=checkbox][role=switch]{--border-width: 3px}thead th,thead td,tfoot th,tfoot td{--border-width: 3px}:not(thead,tfoot)>*>td{--font-size: 0.875em}pre,code,kbd,samp{--font-family: "Menlo", "Consolas", "Roboto Mono", "Ubuntu Monospace", "Noto Mono", "Oxygen Mono", "Liberation Mono", monospace, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"}kbd{--font-weight: bolder}[data-theme=light],:root:not([data-theme=dark]){--background-color: #fff;--color: hsl(205, 20%, 32%);--h1-color: hsl(205, 30%, 15%);--h2-color: #24333e;--h3-color: hsl(205, 25%, 23%);--h4-color: #374956;--h5-color: hsl(205, 20%, 32%);--h6-color: #4d606d;--muted-color: hsl(205, 10%, 50%);--muted-border-color: hsl(205, 20%, 94%);--primary: hsl(195, 85%, 41%);--primary-hover: hsl(195, 90%, 32%);--primary-focus: rgba(16, 149, 193, 0.125);--primary-inverse: #fff;--secondary: hsl(205, 15%, 41%);--secondary-hover: hsl(205, 20%, 32%);--secondary-focus: rgba(89, 107, 120, 0.125);--secondary-inverse: #fff;--contrast: hsl(205, 30%, 15%);--contrast-hover: #000;--contrast-focus: rgba(89, 107, 120, 0.125);--contrast-inverse: #fff;--mark-background-color: #fff2ca;--mark-color: #543a26;--ins-color: #388e3c;--del-color: #c62828;--blockquote-border-color: var(--muted-border-color);--blockquote-footer-color: var(--muted-color);--button-box-shadow: 0 0 0 rgba(0, 0, 0, 0);--button-hover-box-shadow: 0 0 0 rgba(0, 0, 0, 0);--form-element-background-color: transparent;--form-element-border-color: hsl(205, 14%, 68%);--form-element-color: var(--color);--form-element-placeholder-color: var(--muted-color);--form-element-active-background-color: transparent;--form-element-active-border-color: var(--primary);--form-element-focus-color: var(--primary-focus);--form-element-disabled-background-color: hsl(205, 18%, 86%);--form-element-disabled-border-color: hsl(205, 14%, 68%);--form-element-disabled-opacity: 0.5;--form-element-invalid-border-color: #c62828;--form-element-invalid-active-border-color: #d32f2f;--form-element-invalid-focus-color: rgba(211, 47, 47, 0.125);--form-element-valid-border-color: #388e3c;--form-element-valid-active-border-color: #43a047;--form-element-valid-focus-color: rgba(67, 160, 71, 0.125);--switch-background-color: hsl(205, 16%, 77%);--switch-color: var(--primary-inverse);--switch-checked-background-color: var(--primary);--range-border-color: hsl(205, 18%, 86%);--range-active-border-color: hsl(205, 16%, 77%);--range-thumb-border-color: var(--background-color);--range-thumb-color: var(--secondary);--range-thumb-hover-color: var(--secondary-hover);--range-thumb-active-color: var(--primary);--table-border-color: var(--muted-border-color);--table-row-stripped-background-color: #f6f8f9;--code-background-color: hsl(205, 20%, 94%);--code-color: var(--muted-color);--code-kbd-background-color: var(--contrast);--code-kbd-color: var(--contrast-inverse);--code-tag-color: hsl(330, 40%, 50%);--code-property-color: hsl(185, 40%, 40%);--code-value-color: hsl(40, 20%, 50%);--code-comment-color: hsl(205, 14%, 68%);--accordion-border-color: var(--muted-border-color);--accordion-close-summary-color: var(--color);--accordion-open-summary-color: var(--muted-color);--card-background-color: var(--background-color);--card-border-color: var(--muted-border-color);--card-box-shadow: 0.0145rem 0.029rem 0.174rem rgba(27, 40, 50, 0.01698), 0.0335rem 0.067rem 0.402rem rgba(27, 40, 50, 0.024), 0.0625rem 0.125rem 0.75rem rgba(27, 40, 50, 0.03), 0.1125rem 0.225rem 1.35rem rgba(27, 40, 50, 0.036), 0.2085rem 0.417rem 2.502rem rgba(27, 40, 50, 0.04302), 0.5rem 1rem 6rem rgba(27, 40, 50, 0.06), 0 0 0 0.0625rem rgba(27, 40, 50, 0.015);--card-sectionning-background-color: #fbfbfc;--dropdown-background-color: #fbfbfc;--dropdown-border-color: #e1e6eb;--dropdown-box-shadow: var(--card-box-shadow);--dropdown-color: var(--color);--dropdown-hover-background-color: hsl(205, 20%, 94%);--modal-overlay-background-color: rgba(213, 220, 226, 0.7);--progress-background-color: hsl(205, 18%, 86%);--progress-color: var(--primary);--loading-spinner-opacity: 0.5;--tooltip-background-color: var(--contrast);--tooltip-color: var(--contrast-inverse);--icon-checkbox: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");--icon-chevron: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");--icon-chevron-button: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");--icon-chevron-button-inverse: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");--icon-close: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(115, 130, 140)' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E");--icon-date: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cline x1='16' y1='2' x2='16' y2='6'%3E%3C/line%3E%3Cline x1='8' y1='2' x2='8' y2='6'%3E%3C/line%3E%3Cline x1='3' y1='10' x2='21' y2='10'%3E%3C/line%3E%3C/svg%3E");--icon-invalid: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(198, 40, 40)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='12' y1='8' x2='12' y2='12'%3E%3C/line%3E%3Cline x1='12' y1='16' x2='12.01' y2='16'%3E%3C/line%3E%3C/svg%3E");--icon-minus: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(255, 255, 255)' stroke-width='4' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3C/svg%3E");--icon-search: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");--icon-time: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cpolyline points='12 6 12 12 16 14'%3E%3C/polyline%3E%3C/svg%3E");--icon-valid: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(56, 142, 60)' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");color-scheme:light}progress,[type=checkbox],[type=radio],[type=range]{accent-color:var(--primary)}*,*::before,*::after{box-sizing:border-box;background-repeat:no-repeat}::before,::after{text-decoration:inherit;vertical-align:inherit}:where(:root){-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-text-size-adjust:100%;text-size-adjust:100%;background-color:var(--background-color);color:var(--color);font-weight:var(--font-weight);font-size:var(--font-size);line-height:var(--line-height);font-family:var(--font-family);text-rendering:optimizeLegibility;overflow-wrap:break-word;cursor:default;tab-size:4}main{display:block}body{width:100%;margin:0}body>header,body>main,body>footer{width:100%;margin-right:auto;margin-left:auto;padding:var(--block-spacing-vertical) 0}.container,.container-fluid{width:100%;margin-right:auto;margin-left:auto;padding-right:var(--spacing);padding-left:var(--spacing)}@media(min-width: 576px){.container{max-width:510px;padding-right:0;padding-left:0}}@media(min-width: 768px){.container{max-width:700px}}@media(min-width: 992px){.container{max-width:920px}}@media(min-width: 1200px){.container{max-width:1130px}}section{margin-bottom:var(--block-spacing-vertical)}.grid{grid-column-gap:var(--grid-spacing-horizontal);grid-row-gap:var(--grid-spacing-vertical);display:grid;grid-template-columns:1fr;margin:0}@media(min-width: 992px){.grid{grid-template-columns:repeat(auto-fit, minmax(0%, 1fr))}}.grid>*{min-width:0}figure{display:block;margin:0;padding:0;overflow-x:auto}figure figcaption{padding:calc(var(--spacing)*.5) 0;color:var(--muted-color)}b,strong{font-weight:bolder}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}address,blockquote,dl,figure,form,ol,p,pre,table,ul{margin-top:0;margin-bottom:var(--typography-spacing-vertical);color:var(--color);font-style:normal;font-weight:var(--font-weight);font-size:var(--font-size)}a,[role=link]{--color: var(--primary);--background-color: transparent;outline:none;background-color:var(--background-color);color:var(--color);text-decoration:var(--text-decoration);transition:background-color var(--transition),color var(--transition),text-decoration var(--transition),box-shadow var(--transition)}a:is([aria-current],:hover,:active,:focus),[role=link]:is([aria-current],:hover,:active,:focus){--color: var(--primary-hover);--text-decoration: underline}a:focus,[role=link]:focus{--background-color: var(--primary-focus)}a.secondary,[role=link].secondary{--color: var(--secondary)}a.secondary:is([aria-current],:hover,:active,:focus),[role=link].secondary:is([aria-current],:hover,:active,:focus){--color: var(--secondary-hover)}a.secondary:focus,[role=link].secondary:focus{--background-color: var(--secondary-focus)}a.contrast,[role=link].contrast{--color: var(--contrast)}a.contrast:is([aria-current],:hover,:active,:focus),[role=link].contrast:is([aria-current],:hover,:active,:focus){--color: var(--contrast-hover)}a.contrast:focus,[role=link].contrast:focus{--background-color: var(--contrast-focus)}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:var(--typography-spacing-vertical);color:var(--color);font-weight:var(--font-weight);font-size:var(--font-size);font-family:var(--font-family)}h1{--color: var(--h1-color)}h2{--color: var(--h2-color)}h3{--color: var(--h3-color)}h4{--color: var(--h4-color)}h5{--color: var(--h5-color)}h6{--color: var(--h6-color)}:where(address,blockquote,dl,figure,form,ol,p,pre,table,ul)~:is(h1,h2,h3,h4,h5,h6){margin-top:var(--typography-spacing-vertical)}hgroup,.headings{margin-bottom:var(--typography-spacing-vertical)}hgroup>*,.headings>*{margin-bottom:0}hgroup>*:last-child,.headings>*:last-child{--color: var(--muted-color);--font-weight: unset;font-size:1rem;font-family:unset}p{margin-bottom:var(--typography-spacing-vertical)}small{font-size:var(--font-size)}:where(dl,ol,ul){padding-right:0;padding-left:var(--spacing);padding-inline-start:var(--spacing);padding-inline-end:0}:where(dl,ol,ul) li{margin-bottom:calc(var(--typography-spacing-vertical)*.25)}:where(dl,ol,ul) :is(dl,ol,ul){margin:0;margin-top:calc(var(--typography-spacing-vertical)*.25)}ul li{list-style:square}mark{padding:.125rem .25rem;background-color:var(--mark-background-color);color:var(--mark-color);vertical-align:baseline}blockquote{display:block;margin:var(--typography-spacing-vertical) 0;padding:var(--spacing);border-right:none;border-left:.25rem solid var(--blockquote-border-color);border-inline-start:.25rem solid var(--blockquote-border-color);border-inline-end:none}blockquote footer{margin-top:calc(var(--typography-spacing-vertical)*.5);color:var(--blockquote-footer-color)}abbr[title]{border-bottom:1px dotted;text-decoration:none;cursor:help}ins{color:var(--ins-color);text-decoration:none}del{color:var(--del-color)}::selection{background-color:var(--primary-focus)}ul li{list-style:disc}dl{padding-left:0px}dd{margin-left:1rem}input,optgroup,select,textarea{margin:0;font-size:1rem;line-height:var(--line-height);font-family:inherit;letter-spacing:inherit}input{overflow:visible}select{text-transform:none}legend{max-width:100%;padding:0;color:inherit;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{padding:0}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{padding:0;border-style:none}:-moz-focusring{outline:none}:-moz-ui-invalid{box-shadow:none}::-ms-expand{display:none}[type=file],[type=range]{padding:0;border-width:0}input:not([type=checkbox],[type=radio],[type=range]){height:calc(1rem*var(--line-height) + var(--form-element-spacing-vertical)*2 + var(--border-width)*2)}fieldset{margin:0;margin-bottom:var(--spacing);padding:0;border:0}label,fieldset legend{display:block;margin-bottom:calc(var(--spacing)*.25);font-weight:var(--form-label-font-weight, var(--font-weight))}input:not([type=checkbox],[type=radio]),select,textarea{width:100%}input:not([type=checkbox],[type=radio],[type=range],[type=file]),select,textarea{appearance:none;padding:var(--form-element-spacing-vertical) var(--form-element-spacing-horizontal)}input,select,textarea{--background-color: var(--form-element-background-color);--border-color: var(--form-element-border-color);--color: var(--form-element-color);--box-shadow: none;border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}input:not([type=submit],[type=button],[type=reset],[type=checkbox],[type=radio],[readonly]):is(:active,:focus),:where(select,textarea):is(:active,:focus){--background-color: var(--form-element-active-background-color)}input:not([type=submit],[type=button],[type=reset],[role=switch],[readonly]):is(:active,:focus),:where(select,textarea):is(:active,:focus){--border-color: var(--form-element-active-border-color)}input:not([type=submit],[type=button],[type=reset],[type=range],[type=file],[readonly]):focus,select:focus,textarea:focus{--box-shadow: 0 0 0 var(--outline-width) var(--form-element-focus-color)}input:not([type=submit],[type=button],[type=reset])[disabled],select[disabled],textarea[disabled],:where(fieldset[disabled]) :is(input:not([type=submit],[type=button],[type=reset]),select,textarea){--background-color: var(--form-element-disabled-background-color);--border-color: var(--form-element-disabled-border-color);opacity:var(--form-element-disabled-opacity);pointer-events:none}:where(input,select,textarea):not([type=checkbox],[type=radio],[type=date],[type=datetime-local],[type=month],[type=time],[type=week])[aria-invalid]{padding-right:calc(var(--form-element-spacing-horizontal) + 1.5rem);padding-left:var(--form-element-spacing-horizontal);padding-inline-start:var(--form-element-spacing-horizontal);padding-inline-end:calc(var(--form-element-spacing-horizontal) + 1.5rem);background-position:center right .75rem;background-size:1rem auto;background-repeat:no-repeat}:where(input,select,textarea):not([type=checkbox],[type=radio],[type=date],[type=datetime-local],[type=month],[type=time],[type=week])[aria-invalid=false]{background-image:var(--icon-valid)}:where(input,select,textarea):not([type=checkbox],[type=radio],[type=date],[type=datetime-local],[type=month],[type=time],[type=week])[aria-invalid=true]{background-image:var(--icon-invalid)}:where(input,select,textarea)[aria-invalid=false]{--border-color: var(--form-element-valid-border-color)}:where(input,select,textarea)[aria-invalid=false]:is(:active,:focus){--border-color: var(--form-element-valid-active-border-color);--box-shadow: 0 0 0 var(--outline-width) var(--form-element-valid-focus-color)}:where(input,select,textarea)[aria-invalid=true]{--border-color: var(--form-element-invalid-border-color)}:where(input,select,textarea)[aria-invalid=true]:is(:active,:focus){--border-color: var(--form-element-invalid-active-border-color);--box-shadow: 0 0 0 var(--outline-width) var(--form-element-invalid-focus-color)}[dir=rtl] :where(input,select,textarea):not([type=checkbox],[type=radio]):is([aria-invalid],[aria-invalid=true],[aria-invalid=false]){background-position:center left .75rem}input::placeholder,input::-webkit-input-placeholder,textarea::placeholder,textarea::-webkit-input-placeholder,select:invalid{color:var(--form-element-placeholder-color);opacity:1}input:not([type=checkbox],[type=radio]),select,textarea{margin-bottom:var(--spacing)}select::-ms-expand{border:0;background-color:rgba(0,0,0,0)}select:not([multiple],[size]){padding-right:calc(var(--form-element-spacing-horizontal) + 1.5rem);padding-left:var(--form-element-spacing-horizontal);padding-inline-start:var(--form-element-spacing-horizontal);padding-inline-end:calc(var(--form-element-spacing-horizontal) + 1.5rem);background-image:var(--icon-chevron);background-position:center right .75rem;background-size:1rem auto;background-repeat:no-repeat}[dir=rtl] select:not([multiple],[size]){background-position:center left .75rem}:where(input,select,textarea,.grid)+small{display:block;width:100%;margin-top:calc(var(--spacing)*-0.75);margin-bottom:var(--spacing);color:var(--muted-color)}label>:where(input,select,textarea){margin-top:calc(var(--spacing)*.25)}[type=color]::-webkit-color-swatch-wrapper{padding:0}[type=color]::-moz-focus-inner{padding:0}[type=color]::-webkit-color-swatch{border:0;border-radius:calc(var(--border-radius)*.5)}[type=color]::-moz-color-swatch{border:0;border-radius:calc(var(--border-radius)*.5)}input:not([type=checkbox],[type=radio],[type=range],[type=file]):is([type=date],[type=datetime-local],[type=month],[type=time],[type=week]){--icon-position: 0.75rem;--icon-width: 1rem;padding-right:calc(var(--icon-width) + var(--icon-position));background-image:var(--icon-date);background-position:center right var(--icon-position);background-size:var(--icon-width) auto;background-repeat:no-repeat}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=time]{background-image:var(--icon-time)}[type=date]::-webkit-calendar-picker-indicator,[type=datetime-local]::-webkit-calendar-picker-indicator,[type=month]::-webkit-calendar-picker-indicator,[type=time]::-webkit-calendar-picker-indicator,[type=week]::-webkit-calendar-picker-indicator{width:var(--icon-width);margin-right:calc(var(--icon-width)*-1);margin-left:var(--icon-position);opacity:0}[dir=rtl] :is([type=date],[type=datetime-local],[type=month],[type=time],[type=week]){text-align:right}[type=file]{--color: var(--muted-color);padding:calc(var(--form-element-spacing-vertical)*.5) 0;border:0;border-radius:0;background:none}[type=file]::file-selector-button{--background-color: var(--secondary);--border-color: var(--secondary);--color: var(--secondary-inverse);margin-right:calc(var(--spacing)/2);margin-left:0;margin-inline-start:0;margin-inline-end:calc(var(--spacing)/2);padding:calc(var(--form-element-spacing-vertical)*.5) calc(var(--form-element-spacing-horizontal)*.5);border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);font-size:1rem;line-height:var(--line-height);text-align:center;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}[type=file]::file-selector-button:is(:hover,:active,:focus){--background-color: var(--secondary-hover);--border-color: var(--secondary-hover)}[type=file]::-webkit-file-upload-button{--background-color: var(--secondary);--border-color: var(--secondary);--color: var(--secondary-inverse);margin-right:calc(var(--spacing)/2);margin-left:0;margin-inline-start:0;margin-inline-end:calc(var(--spacing)/2);padding:calc(var(--form-element-spacing-vertical)*.5) calc(var(--form-element-spacing-horizontal)*.5);border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);font-size:1rem;line-height:var(--line-height);text-align:center;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}[type=file]::-webkit-file-upload-button:is(:hover,:active,:focus){--background-color: var(--secondary-hover);--border-color: var(--secondary-hover)}[type=file]::-ms-browse{--background-color: var(--secondary);--border-color: var(--secondary);--color: var(--secondary-inverse);margin-right:calc(var(--spacing)/2);margin-left:0;margin-inline-start:0;margin-inline-end:calc(var(--spacing)/2);padding:calc(var(--form-element-spacing-vertical)*.5) calc(var(--form-element-spacing-horizontal)*.5);border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);font-size:1rem;line-height:var(--line-height);text-align:center;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}[type=file]::-ms-browse:is(:hover,:active,:focus){--background-color: var(--secondary-hover);--border-color: var(--secondary-hover)}[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:1.25rem;background:none}[type=range]::-webkit-slider-runnable-track{width:100%;height:.25rem;border-radius:var(--border-radius);background-color:var(--range-border-color);transition:background-color var(--transition),box-shadow var(--transition)}[type=range]::-moz-range-track{width:100%;height:.25rem;border-radius:var(--border-radius);background-color:var(--range-border-color);transition:background-color var(--transition),box-shadow var(--transition)}[type=range]::-ms-track{width:100%;height:.25rem;border-radius:var(--border-radius);background-color:var(--range-border-color);transition:background-color var(--transition),box-shadow var(--transition)}[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--range-thumb-border-color);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color var(--transition),transform var(--transition)}[type=range]::-moz-range-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--range-thumb-border-color);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color var(--transition),transform var(--transition)}[type=range]::-ms-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--range-thumb-border-color);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color var(--transition),transform var(--transition)}[type=range]:hover,[type=range]:focus{--range-border-color: var(--range-active-border-color);--range-thumb-color: var(--range-thumb-hover-color)}[type=range]:active{--range-thumb-color: var(--range-thumb-active-color)}[type=range]:active::-webkit-slider-thumb{transform:scale(1.25)}[type=range]:active::-moz-range-thumb{transform:scale(1.25)}[type=range]:active::-ms-thumb{transform:scale(1.25)}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search]{padding-inline-start:calc(var(--form-element-spacing-horizontal) + 1.75rem);border-radius:5rem;background-image:var(--icon-search);background-position:center left 1.125rem;background-size:1rem auto;background-repeat:no-repeat}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid]{padding-inline-start:calc(var(--form-element-spacing-horizontal) + 1.75rem);background-position:center left 1.125rem,center right .75rem}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid=false]{background-image:var(--icon-search),var(--icon-valid)}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid=true]{background-image:var(--icon-search),var(--icon-invalid)}[type=search]::-webkit-search-cancel-button{-webkit-appearance:none;display:none}[dir=rtl] :where(input):not([type=checkbox],[type=radio],[type=range],[type=file])[type=search]{background-position:center right 1.125rem}[dir=rtl] :where(input):not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid]{background-position:center right 1.125rem,center left .75rem}:where(table){width:100%;border-collapse:collapse;border-spacing:0;text-indent:0}th,td{padding:calc(var(--spacing)/2) var(--spacing);border-bottom:var(--border-width) solid var(--table-border-color);color:var(--color);font-weight:var(--font-weight);font-size:var(--font-size);text-align:left;text-align:start}tfoot th,tfoot td{border-top:var(--border-width) solid var(--table-border-color);border-bottom:0}table[role=grid] tbody tr:nth-child(odd){background-color:var(--table-row-stripped-background-color)}pre,code,kbd,samp{font-size:.875em;font-family:var(--font-family)}pre{-ms-overflow-style:scrollbar;overflow:auto}pre,code,kbd{border-radius:var(--border-radius);background:var(--code-background-color);color:var(--code-color);font-weight:var(--font-weight);line-height:initial}code,kbd{display:inline-block;padding:.375rem .5rem}pre{display:block;margin-bottom:var(--spacing);overflow-x:auto}pre>code{display:block;padding:var(--spacing);background:none;font-size:14px;line-height:var(--line-height)}code b{color:var(--code-tag-color);font-weight:var(--font-weight)}code i{color:var(--code-property-color);font-style:normal}code u{color:var(--code-value-color);text-decoration:none}code em{color:var(--code-comment-color);font-style:normal}kbd{background-color:var(--code-kbd-background-color);color:var(--code-kbd-color);vertical-align:baseline}hr{height:0;border:0;border-top:1px solid var(--muted-border-color);color:inherit}[hidden],template{display:none}canvas{display:inline-block}details{display:block;margin-bottom:var(--spacing);padding-bottom:var(--spacing);border-bottom:var(--border-width) solid var(--accordion-border-color)}details summary{line-height:1rem;list-style-type:none;cursor:pointer;transition:color var(--transition)}details summary:not([role]){color:var(--accordion-close-summary-color)}details summary::-webkit-details-marker{display:none}details summary::marker{display:none}details summary::-moz-list-bullet{list-style-type:none}details summary::after{display:block;width:1rem;height:1rem;margin-inline-start:calc(var(--spacing, 1rem)*.5);float:right;transform:rotate(-90deg);background-image:var(--icon-chevron);background-position:right center;background-size:1rem auto;background-repeat:no-repeat;content:"";transition:transform var(--transition)}details summary:focus{outline:none}details summary:focus:not([role=button]){color:var(--accordion-active-summary-color)}details summary[role=button]{width:100%;text-align:left}details summary[role=button]::after{height:calc(1rem*var(--line-height, 1.5));background-image:var(--icon-chevron-button)}details summary[role=button]:not(.outline).contrast::after{background-image:var(--icon-chevron-button-inverse)}details[open]>summary{margin-bottom:calc(var(--spacing))}details[open]>summary:not([role]):not(:focus){color:var(--accordion-open-summary-color)}details[open]>summary::after{transform:rotate(0)}[dir=rtl] details summary{text-align:right}[dir=rtl] details summary::after{float:left;background-position:left center}:where(nav li)::before{float:left;content:"​"}nav,nav ul{display:flex}nav{justify-content:space-between}nav ol,nav ul{align-items:center;margin-bottom:0;padding:0;list-style:none}nav ol:first-of-type,nav ul:first-of-type{margin-left:calc(var(--nav-element-spacing-horizontal)*-1)}nav ol:last-of-type,nav ul:last-of-type{margin-right:calc(var(--nav-element-spacing-horizontal)*-1)}nav li{display:inline-block;margin:0;padding:var(--nav-element-spacing-vertical) var(--nav-element-spacing-horizontal)}nav li>*{--spacing: 0}nav :where(a,[role=link]){display:inline-block;margin:calc(var(--nav-link-spacing-vertical)*-1) calc(var(--nav-link-spacing-horizontal)*-1);padding:var(--nav-link-spacing-vertical) var(--nav-link-spacing-horizontal);border-radius:var(--border-radius);text-decoration:none}nav :where(a,[role=link]):is([aria-current],:hover,:active,:focus){text-decoration:none}nav[aria-label=breadcrumb]{align-items:center;justify-content:start}nav[aria-label=breadcrumb] ul li:not(:first-child){margin-inline-start:var(--nav-link-spacing-horizontal)}nav[aria-label=breadcrumb] ul li:not(:last-child) ::after{position:absolute;width:calc(var(--nav-link-spacing-horizontal)*2);margin-inline-start:calc(var(--nav-link-spacing-horizontal)/2);content:"/";color:var(--muted-color);text-align:center}nav[aria-label=breadcrumb] a[aria-current]{background-color:rgba(0,0,0,0);color:inherit;text-decoration:none;pointer-events:none}nav [role=button]{margin-right:inherit;margin-left:inherit;padding:var(--nav-link-spacing-vertical) var(--nav-link-spacing-horizontal)}aside nav,aside ol,aside ul,aside li{display:block}aside li{padding:calc(var(--nav-element-spacing-vertical)*.5) var(--nav-element-spacing-horizontal)}aside li a{display:block}aside li [role=button]{margin:inherit}[dir=rtl] nav[aria-label=breadcrumb] ul li:not(:last-child) ::after{content:"\\"}details[role=list],li[role=list]{position:relative}details[role=list] summary+ul,li[role=list]>ul{display:flex;z-index:99;position:absolute;top:auto;right:0;left:0;flex-direction:column;margin:0;padding:0;border:var(--border-width) solid var(--dropdown-border-color);border-radius:var(--border-radius);border-top-right-radius:0;border-top-left-radius:0;background-color:var(--dropdown-background-color);box-shadow:var(--card-box-shadow);color:var(--dropdown-color);white-space:nowrap}details[role=list] summary+ul li,li[role=list]>ul li{width:100%;margin-bottom:0;padding:calc(var(--form-element-spacing-vertical)*.5) var(--form-element-spacing-horizontal);list-style:none}details[role=list] summary+ul li:first-of-type,li[role=list]>ul li:first-of-type{margin-top:calc(var(--form-element-spacing-vertical)*.5)}details[role=list] summary+ul li:last-of-type,li[role=list]>ul li:last-of-type{margin-bottom:calc(var(--form-element-spacing-vertical)*.5)}details[role=list] summary+ul li a,li[role=list]>ul li a{display:block;margin:calc(var(--form-element-spacing-vertical)*-0.5) calc(var(--form-element-spacing-horizontal)*-1);padding:calc(var(--form-element-spacing-vertical)*.5) var(--form-element-spacing-horizontal);overflow:hidden;color:var(--dropdown-color);text-decoration:none;text-overflow:ellipsis}details[role=list] summary+ul li a:hover,li[role=list]>ul li a:hover{background-color:var(--dropdown-hover-background-color)}details[role=list] summary::after,li[role=list]>a::after{display:block;width:1rem;height:calc(1rem*var(--line-height, 1.5));margin-inline-start:.5rem;float:right;transform:rotate(0deg);background-position:right center;background-size:1rem auto;background-repeat:no-repeat;content:""}details[role=list]{padding:0;border-bottom:none}details[role=list] summary{margin-bottom:0}details[role=list] summary:not([role]){height:calc(1rem*var(--line-height) + var(--form-element-spacing-vertical)*2 + var(--border-width)*2);padding:var(--form-element-spacing-vertical) var(--form-element-spacing-horizontal);border:var(--border-width) solid var(--form-element-border-color);border-radius:var(--border-radius);background-color:var(--form-element-background-color);color:var(--form-element-placeholder-color);line-height:inherit;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}details[role=list] summary:not([role]):active,details[role=list] summary:not([role]):focus{border-color:var(--form-element-active-border-color);background-color:var(--form-element-active-background-color)}details[role=list] summary:not([role]):focus{box-shadow:0 0 0 var(--outline-width) var(--form-element-focus-color)}details[role=list][open] summary{border-bottom-right-radius:0;border-bottom-left-radius:0}details[role=list][open] summary::before{display:block;z-index:1;position:fixed;top:0;right:0;bottom:0;left:0;background:none;content:"";cursor:default}nav details[role=list] summary,nav li[role=list] a{display:flex;direction:ltr}nav details[role=list] summary+ul,nav li[role=list]>ul{min-width:fit-content;border-radius:var(--border-radius)}nav details[role=list] summary+ul li a,nav li[role=list]>ul li a{border-radius:0}nav details[role=list] summary,nav details[role=list] summary:not([role]){height:auto;padding:var(--nav-link-spacing-vertical) var(--nav-link-spacing-horizontal)}nav details[role=list][open] summary{border-radius:var(--border-radius)}nav details[role=list] summary+ul{margin-top:var(--outline-width);margin-inline-start:0}nav details[role=list] summary[role=link]{margin-bottom:calc(var(--nav-link-spacing-vertical)*-1);line-height:var(--line-height)}nav details[role=list] summary[role=link]+ul{margin-top:calc(var(--nav-link-spacing-vertical) + var(--outline-width));margin-inline-start:calc(var(--nav-link-spacing-horizontal)*-1)}li[role=list]:hover>ul,li[role=list] a:active~ul,li[role=list] a:focus~ul{display:flex}li[role=list]>ul{display:none;margin-top:calc(var(--nav-link-spacing-vertical) + var(--outline-width));margin-inline-start:calc(var(--nav-element-spacing-horizontal) - var(--nav-link-spacing-horizontal))}li[role=list]>a::after{background-image:var(--icon-chevron)}[aria-controls]{cursor:pointer}[aria-disabled=true],[disabled]{cursor:not-allowed}[aria-hidden=false][hidden]{display:initial}[aria-hidden=false][hidden]:not(:focus){clip:rect(0, 0, 0, 0);position:absolute}a,area,button,input,label,select,summary,textarea,[tabindex]{-ms-touch-action:manipulation}[dir=rtl]{direction:rtl}@font-face{font-family:"Comic Neue";font-style:normal;font-weight:400;font-display:swap;src:local("Comic Neue"),local("Comic Neue"),url("/assets/fonts/ComicNeueSubset.woff2") format("woff2")}@font-face{font-family:"AoyagiKouzanTSubset";font-style:normal;font-weight:400;font-display:swap;src:local("AoyagiKouzanTSubset"),local("AoyagiKouzanTSubset"),url("/assets/fonts/AoyagiKouzanTSubset.woff2") format("woff2")}:root{--font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", Symbola}h1,h2,h3,h4,h5,h6{--typography-spacing-vertical: 1.5rem;font-weight:normal}h2{border-bottom:1px solid #5af;padding:0}h3{border-bottom:1px dashed #5af}h4{border-bottom:1px dotted #5af}h5{border-bottom:1px dashed #333}h6{--font-size: 1.075rem;--typography-spacing-vertical: 1.4rem;border-bottom:1px dashed #333}strong{font-size:1.75em}code,kbd,samp{--font-family: "Menlo", "Cascadia", "Cascadia Code", "Cascadia Mono", "Consolas", "Monaco", monospace, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", Symbola}pre,code,kbd{color:var(--del-color)}del{color:var(--muted-color)}pre{margin-top:var(--spacing);padding:calc(.5*var(--spacing))}figure.highlight{margin:0;padding:0;border:0;font-family:inherit}figure.highlight pre{padding-top:calc(.25*var(--spacing));padding-bottom:calc(.25*var(--spacing))}figure.highlight code{padding-top:calc(.25*var(--spacing));padding-bottom:calc(.25*var(--spacing))}.highlight{font-family:inherit}.highlight table td{padding:5px}.highlight table pre{margin:0}.highlight,.highlight .w{color:#586e75}.highlight .err{color:#002b36;background-color:#dc322f}.highlight .c,.highlight .ch,.highlight .cd,.highlight .cm,.highlight .cpf,.highlight .c1,.highlight .cs{color:#657b83}.highlight .cp{color:#b58900}.highlight .nt{color:#b58900}.highlight .o,.highlight .ow{color:#93a1a1}.highlight .p,.highlight .pi{color:#93a1a1}.highlight .gi{color:#859900}.highlight .gd{color:#dc322f}.highlight .gh{color:#268bd2;background-color:#002b36;font-weight:bold}.highlight .k,.highlight .kn,.highlight .kp,.highlight .kr,.highlight .kv{color:#6c71c4}.highlight .kc{color:#cb4b16}.highlight .kt{color:#cb4b16}.highlight .kd{color:#cb4b16}.highlight .s,.highlight .sb,.highlight .sc,.highlight .dl,.highlight .sd,.highlight .s2,.highlight .sh,.highlight .sx,.highlight .s1{color:#859900}.highlight .sa{color:#6c71c4}.highlight .sr{color:#2aa198}.highlight .si{color:#d33682}.highlight .se{color:#d33682}.highlight .nn{color:#b58900}.highlight .nc{color:#b58900}.highlight .no{color:#b58900}.highlight .na{color:#268bd2}.highlight .m,.highlight .mb,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .il,.highlight .mo,.highlight .mx{color:#859900}.highlight .ss{color:#859900}.title-font{font-family:"Comic Neue","AoyagiKouzanTSubset",sans-serif}#top{border-radius:80%}.wrapper{min-height:100%}header{position:sticky;top:0;background-color:var(--background-color);box-shadow:0 6px 11px -12px rgba(0,0,0,.7);margin-bottom:var(--spacing);z-index:100}a:hover{text-decoration:underline}nav{--nav-element-spacing-vertical: 0.25rem;--form-element-spacing-vertical: 0.25rem;--typography-spacing-vertical: 0rem}nav input:not([type=checkbox],[type=radio]),nav select,nav textarea{width:100%;max-width:300px}nav[aria-label=breadcrumb] ul li:not(:last-child) ::after{text-decoration:none}.langselector{margin-left:auto}#table-of-contents{align-items:center;justify-content:start;border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:10px;padding-bottom:10px}#table-of-contents h2{--font-size: 1rem;--typography-spacing-vertical: 0em;border:none}#table-of-contents h2:after{content:": ";padding:0;margin:0;margin-right:var(--nav-link-spacing-horizontal)}#table-of-contents ul li:not(:first-child){margin-inline-start:var(--nav-link-spacing-horizontal)}#table-of-contents ul li:not(:last-child) ::after{position:absolute;width:calc(var(--nav-link-spacing-horizontal)*2);margin-inline-start:calc(var(--nav-link-spacing-horizontal)/2);content:"/";color:var(--muted-color);text-align:center;text-decoration:none}#table-of-contents a[aria-current]{background-color:rgba(0,0,0,0);color:inherit;text-decoration:none;pointer-events:none}.footer,footer p{text-align:right}.profile-picture{height:20vw;max-height:260px;width:20vw;max-width:260px;position:relative;float:right;border-radius:50%;margin-top:-1rem}.menu-btn{display:none}@media(min-width: 768px){.md-hide{display:none}.back_to_top{margin-left:85%}.title-font{font-size:3rem}}@media(max-width: 768px){.menu-icon{display:flex;height:60px;width:60px;justify-content:center;align-items:center;position:relative;z-index:200;cursor:pointer}.menu-icon span,.menu-icon span:before,.menu-icon span:after{content:"";display:block;height:3px;width:25px;border-radius:3px;background:#000;transition:.5s;position:absolute}.menu-icon span:before{bottom:8px}.menu-icon span:after{top:8px}#menu-btn:checked~.menu-icon span{background:#fff}#menu-btn:checked~.menu-icon span::before{bottom:0;transform:rotate(45deg)}#menu-btn:checked~.menu-icon span::after{top:0;transform:rotate(-45deg)}.menu{width:100%;height:100%;position:fixed;top:0;left:100%;z-index:200;background:#fff;transition:.5s;flex-direction:column;margin-top:120px}#menu-btn:checked~.menu{left:0;width:100%;font-size:calc(1.5*var(--font-size))}.title-font{font-size:2rem}#table-of-contents{display:none}.sm-hide{display:none}.profile-picture{margin-top:-4rem}}.logo{border-radius:80%}.icon-envelope svg,.icon-key svg,.icon-keybase svg,.icon-twitter svg,.icon-facebook svg,.icon-github svg,.icon-mastodon svg,.icon-amp svg{height:1.2rem;width:1.2rem}.icon-envelope{color:#242424}.icon-key{color:#ff8c00}.icon-keybase{color:#ff8c00}.icon-twitter{color:#55acee}.icon-facebook{color:#3b5998}.icon-github{color:#4c4c4c}.icon-mastodon{color:#3b5998}.icon-amp{color:#ff851b}.research li:nth-child(even){background-color:var(--table-row-stripped-background-color)}.back_to_top{position:sticky;bottom:20px;margin-top:120vh;margin-left:calc(100% - 20px - 6rem);text-decoration:none;padding:10px;color:#fff;background:#000;border-radius:100px;white-space:nowrap}.nowrap{white-space:pre}span.anchor{display:none}.sanchor{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAAAAAA6I3INAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAOAAAADgCxW/H3AAAAH0lEQVQI12M4jAIYDv9HAni4hw/Tmgt3E1YuiqtQAAD5Nq+Ne1ON1gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMi0wNy0zMVQxNTowNDowNCswOTowMONpTpcAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMDctMTAtMjhUMDc6NDY6MzArMDk6MDAE9UrdAAAAAElFTkSuQmCC);background-position:bottom right;background-repeat:no-repeat;background-size:100% auto;padding:1rem 1rem 0px 0px;color:#fff;background-color:rgba(0,0,0,0);font-size:1px}.canchor{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAMAAAADADOpTJ+AAAAIElEQVQI12P4jwQYsHKOHDlCDAe3AVAOSDVcD24OAgAAVIGJOMkyXx4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTItMDctMzFUMTU6MDM6NTgrMDk6MDCO9TH+AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDA3LTEwLTI4VDA3OjQ2OjMwKzA5OjAwBPVK3QAAAABJRU5ErkJggg==);background-position:bottom right;background-repeat:no-repeat;background-size:100% auto;padding:1rem 1rem 0px 0px;color:#fff;background-color:rgba(0,0,0,0);font-size:1px}.mail{display:none}.sanchor:before{display:block;content:" ";margin-top:-110px;height:110px;visibility:hidden}p.source{text-align:right;font-size:80%}p.source cite{font-style:normal}.day h2{font-size:1rem}.amp-htb{--nav-link-spacing-vertical: 0;--nav-link-spacing-horizontal: 0}.comment{display:none}.tdiary-profile-picture{border-radius:50%;width:30vw;max-width:260px;max-height:260px;margin-left:auto;margin-right:auto}.amazon-detail{display:flex;padding:var(--spacing);border:thin solid #000;box-shadow:0 6px 10px -10px rgba(0,0,0,.7)}.amazon-detail-desc{margin-left:var(--spacing)}@media(max-width: 768px){.tdiary-profile-picture{display:none}}*[id]:before{display:block;content:" ";margin-top:-120px;height:120px;visibility:hidden}    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <meta name="author" content="Youhei SASAKI">
    <!-- end: check google site verification -->
    <!-- end: alternate -->
    <!-- begin jekyll seo -->
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Squid で広告避け | Youhei SASAKI’s official site</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Squid で広告避け" />
<meta name="author" content="Youhei SASAKI" />
<meta property="og:locale" content="ja" />
<link rel="canonical" href="https://uwabami.github.io/cc-env/DebianSquid.html" />
<meta property="og:url" content="https://uwabami.github.io/cc-env/DebianSquid.html" />
<meta property="og:site_name" content="Youhei SASAKI’s official site" />
<meta property="og:image" content="https://uwabami.github.io/assets/img/eyecatch_1600x900.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-31T09:12:26+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://uwabami.github.io/assets/img/eyecatch_1600x900.png" />
<meta property="twitter:title" content="Squid で広告避け" />
<meta name="twitter:site" content="@uwabami" />
<meta name="twitter:creator" content="@Youhei SASAKI" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Youhei SASAKI","url":"https://uwabami.github.io/"},"dateModified":"2021-08-31T09:12:26+09:00","datePublished":"2021-08-31T09:12:26+09:00","headline":"Squid で広告避け","image":"https://uwabami.github.io/assets/img/eyecatch_1600x900.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://uwabami.github.io/cc-env/DebianSquid.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://uwabami.github.io/assets/img/eyecatch_1600x900.png"},"name":"Youhei SASAKI"},"url":"https://uwabami.github.io/cc-env/DebianSquid.html"}</script>
<!-- End Jekyll SEO tag -->
    <!-- end jekyll seo -->
    <link rel="icon" type="image/x-icon" href="https://uwabami.github.io/assets/img/favicon.ico">
    <!-- apple icons -->
    <link rel="apple-touch-icon" href="https://uwabami.github.io/assets/img/favicon-256x256.png">
    <link rel="shortcut-icon" type="image/ico" href="/assets/img/favicon.ico">
  </head>
  <body>
    <amp-geo layout="nodisplay">
  <script type="application/json">
    {
        "ISOCountryGroups": {
            "eu": [ "preset-eea"]
        }
    }
  </script>
</amp-geo>
<amp-consent layout="nodisplay" id="consent-element">
  <script type="application/json">
    {
        "consents": {
            "my_consent": {
                "promptIfUnknownForGeoGroup": "eu",
                "promptUI": "consent-ui"
            }
        }
    }
  </script>
  <div id="consent-ui">
    <p>I use cookies to analyze how visitors use my website via Google Analytics:</p>
    <button on="tap:consent-element.accept" role="button">Accept</button>
    <button on="tap:consent-element.reject" role="button">Reject</button>
    <button on="tap:consent-element.dismiss" role="button">Dismiss</button>
  </div>
</amp-consent>

    <div class="wrapper container" id="wholepage">
      <header>
        <!-- page loop -->
<nav>
  <ul>
    <li>
      <a href="/index.html">
        <amp-img layout="fixed"
                 width="1.2rem"
                 height="1.2rem"
                 src="/assets/img/top.webp"
                 alt="About"
                 id="top">
          <amp-img fallback
                   layout="fixed"
                   width="1.2rem"
                   height="1.2rem"
                   src="/assets/img/top.jpg"
                   alt="About"
                   id="top">
          </amp-img>
        </amp-img>
      </a>
    </li>
  </ul>
  <input class="menu-btn" type="checkbox" id="menu-btn"/>
  <label class="menu-icon" for="menu-btn"><span></span></label>
  <ul class="menu">
    <!-- lang ja -->
    <li>
      <a href="/research/index.html">
        Research
      </a>
    </li>
    <li>
      <details role="list">
        <summary aria-haspopup="listbox" role="link">Software</summary>
        <ul>
          <li>
            <a href="/software/index.html">
              Repository
            </a>
          </li>
          <li>
            <a href="/cc-env/index.html">
              Comp. Memo
            </a>
          </li>
        </ul>
      </details>
    </li>
    <li>
      <a href="https://uwabami.junkhub.org/log">blog</a>
    </li>
    <li>
      <form method="GET"
            action="https://www.google.com/cse"
            target="_top">
        <input name="cx" type="hidden"
               value="017455171263919107349:oumnpe4bynr" />
        <input name="ie" type="hidden" value="UTF-8" />
        <input type="search" placeholder="検索" name="q" required>
      </form>
    </li>
    
  </ul>
</nav>

        <nav aria-label="breadcrumb">
  <ul>
    <!-- create crumbs -->
    <li>
      <a href="/index.html">
        Top
      </a>
    </li>
    <li><a href="/cc-env/index.html">Cc-env</a></li>      <!-- end page loop -->
  </ul>
  <span class="langselector"><!-- end: lang selector -->
  </span>
</nav>

      </header>
      <main role="main">
        <div class="content">
          <h1 class="page-title">Squid で広告避け</h1>
          <hr>
<p>
Related <a href="https://uwabami.github.io/cc-env/index.html">Index</a> <a href="index.html#orge0707863">Debian</a>
</p>
<div>
<h2 id="orgda6fb6ff">はじめに</h2>
<div class="outline-text-2" id="text-orgda6fb6ff">
<p>
手元で squid を上げています.
</p>

<p>
最初は職場, 居室, モバイル等でネットワーク環境が変わる際に
いちいちプロキシの設定を変えるとかやってられん, ということで
</p>

<ul class="org-ul">
<li>手元で透過 proxy を立ち上げる</li>
<li>アプリケーションは常に proxy として localhost を見に行くようにする</li>
<li>ネットワーク接続の切り替え時に 上流の proxy を切り替える</li>
</ul>

<p>
という目的で squid を上げていました.
<del>単に切り替えるだけなら tinyproxy でも良いんでしょうけど試した感じでは memory leak が酷くて使いモンにならなくて</del>
</p>

<p>
それに加えて
</p>
<ul class="org-ul">
<li>そういえば squid って hosts ファイル読めたよね</li>
</ul>
<p>
ということで, これは広告避けにつかえるな, ということに.
</p>

<p>
Web 広告については, まあ, いろんな意見があって良いと思います.
サービスの収益化は必要でしょうし,
邪魔にならない広告ならまあ良いんですけれど…
</p>

<ul class="org-ul">
<li>Flash とか mp4 で動画バリバリ</li>
<li>閲覧中にポップアップ→誤クリック</li>
</ul>

<p>
とか, そういう奴が多すぎます.
</p>

<p>
最近は https で繋がってくる事も多いので,
手元で rebuild して SSL-Bump するようにしました.
</p>
</div>
</div>
<div>
<h2 id="org95d7cacd">squid を SSL Bump できる様にビルドする</h2>
<div class="outline-text-2" id="text-org95d7cacd">
<p>
SSL Bumpについては
<a href="https://wiki.squid-cache.org/Features/SslBump">Features/SslBump - Squid Web Proxy Wiki</a>
を参照のこと.
要はsquidが MTM して, SSL/TLS を処理する.
</p>

<p>
Debianの squid は SSL Bump が有効になっていないので,
野良ビルドする必要がある.
</p>
</div>

<div>
<h3 id="org583598cb">野良ビルド用の環境構築</h3>
<div class="outline-text-3" id="text-org583598cb">
<p>
真面目なビルド環境の構築については
<a href="https://uwabami.github.io/cc-env/DebianPackaging.html">パッケージ作成環境: sbuild, lintian, piuparts, autopkgtest</a>
を参照のこと. ただ, 野良ビルドの場合にはここまで頑張る必要も無いので
最低限
</p>
<pre class="example">
% sudo apt-get install devscripts debhelper fakeroot build-essenstial
</pre>
<p>
として, 最低限環境を用意しておく.
</p>
</div>
</div>

<div>
<h3 id="org88c764db">squid を SSL Bump を有効にして野良ビルド</h3>
<div class="outline-text-3" id="text-org88c764db">
<p>
ソースの取得は
</p>
<pre class="example">
% apt-get source squid
</pre>
<p>
依存パッケージの取得は
</p>
<pre class="example">
% sudo apt-get build-dep squid
</pre>
<p>
巷に溢れる記事では,
build 時の依存パッケージを全部並べていたりするのだけれど
<code>apt-get build-dep</code> は知っておいて損は無い.
</p>

<p>
ビルド時の修正点は以下
</p>
<ol class="org-ol">
<li>
<p>
<code>debian/rules</code>: configure で ssl bump を有効に
</p>
<figure class="highlight"><pre><code class="language-diff" data-lang="diff"><span class="gh">diff --git a/debian/rules b/debian/rules
index ba9104f3..e0952f62 100755
</span><span class="gd">--- a/debian/rules
</span><span class="gi">+++ b/debian/rules
</span><span class="p">@@ -62,6 +62,8 @@</span> DEB_CONFIGURE_EXTRA_FLAGS := BUILDCXXFLAGS="$(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS)"
                --with-filedescriptors=65536 \
                --with-large-files \
                --with-default-user=proxy \
<span class="gi">+               --enable-ssl-crtd \
+               --with-openssl \
</span>                --with-gnutls
<span class="err">
</span> ifeq ($(DEB_HOST_ARCH_OS), kfreebsd)</code></pre></figure>
</li>
<li>
<p>
<code>debian/control</code>: 今後のために build-depends に libssl-dev を追加
</p>
<figure class="highlight"><pre><code class="language-diff" data-lang="diff"><span class="gh">diff --git a/debian/control b/debian/control
index 8d23f69e..d10052dc 100644
</span><span class="gd">--- a/debian/control
</span><span class="gi">+++ b/debian/control
</span><span class="p">@@ -26,6 +26,7 @@</span> Build-Depends: ed, libltdl-dev, pkg-config
        , libsasl2-dev
        , libxml2-dev
        , nettle-dev
<span class="gi">+       , libssl-dev
</span><span class="err">
</span> Package: squid3
 Architecture: all</code></pre></figure>
</li>
<li>
<p>
<code>debian/changelog</code>: NMU(Non Maintainer Upload) を指定
</p>
<pre class="example">
% dch --nmu
</pre>
</li>
<li>
<p>
ビルド
</p>
<pre class="example">
% debuild -rfakeroot -uc -us -tc
</pre>
</li>
</ol>

<p>
あとは出来上がった deb ファイルをインストールする.
この時点で起動するかどうかは確認しておこう.
</p>
</div>
</div>
</div>

<div>
<h2 id="org40c787af">広告避けの host ファイル</h2>
<div class="outline-text-2" id="text-org40c787af">
<p>
以下のスクリプトで適当に生成
</p>
<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#! /bin/bash</span>
<span class="nv">URL</span><span class="o">=()</span>
<span class="c"># adaway default</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://adaway.org/hosts.txt"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"http://winhelp2002.mvps.org/hosts.txt"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&amp;showintro=0&amp;mimetype=plaintext"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://hosts-file.net/ad_servers.txt"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://sites.google.com/site/hosts2ch/ja"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://raw.githubusercontent.com/multiverse2011/adawaylist-jp/master/hosts"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://warui.intaa.net/adhosts/hosts.txt"</span><span class="o">)</span>
<span class="nv">URL</span><span class="o">=(</span><span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span> <span class="s2">"https://280blocker.net/files/280blocker_domain.txt"</span><span class="o">)</span>
<span class="c">#</span>
<span class="nb">echo</span> <span class="s2">"download hosts list"</span>
<span class="k">for</span> <span class="o">((</span> i <span class="o">=</span> 0<span class="p">;</span> i &lt; <span class="k">${#</span><span class="nv">URL</span><span class="p">[@]</span><span class="k">}</span><span class="p">;</span> ++i <span class="o">))</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">echo </span>wget <span class="nt">-q</span> <span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span> <span class="nt">-O</span> tmp-<span class="nv">$i</span>.txt
    wget <span class="nt">-q</span> <span class="s2">"</span><span class="k">${</span><span class="nv">URL</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="k">}</span><span class="s2">"</span> <span class="nt">-O</span> tmp-<span class="nv">$i</span>.txt
    <span class="nb">echo</span> <span class="s2">"create tmp-</span><span class="nv">$i</span><span class="s2">-list.txt"</span>
    <span class="nb">cat </span>tmp-<span class="nv">$i</span>.txt | <span class="se">\</span>
        <span class="nb">grep</span> <span class="nt">-v</span> localhost | <span class="se">\</span>
        <span class="nb">grep</span> <span class="nt">-v</span> 255.255.255.255 | <span class="se">\</span>
        <span class="nb">grep</span> <span class="nt">-v</span> ^# | <span class="se">\</span>
        <span class="nb">grep</span> <span class="nt">-v</span> ^white | <span class="se">\</span>
        <span class="nb">sed</span> <span class="s1">'/^$/d'</span> | <span class="se">\</span>
        <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/\t/ /g'</span> | <span class="se">\</span>
        nkf <span class="nt">-w</span> <span class="nt">-Lu</span> <span class="nt">-d</span> <span class="o">&gt;</span> tmp-<span class="nv">$i</span><span class="nt">-list</span>.txt
    <span class="nb">rm</span> <span class="nt">-f</span> tmp-<span class="nv">$i</span>.txt
<span class="k">done</span>
<span class="c">#</span>
<span class="nb">echo</span> <span class="s2">"merge tmp list"</span>
<span class="k">for </span>f <span class="k">in</span> <span class="sb">`</span>/bin/ls <span class="nt">-1</span> tmp-?-list.txt<span class="sb">`</span><span class="p">;</span> <span class="k">do
    </span><span class="nb">cat</span> <span class="nv">$f</span> | <span class="nb">grep</span> <span class="nt">-v</span> ^# <span class="o">&gt;&gt;</span> tmp-list.txt
    <span class="nb">rm</span> <span class="nt">-f</span> <span class="nv">$f</span>
<span class="k">done
</span><span class="nb">cat </span>tmp-list.txt | <span class="se">\</span>
    <span class="nb">sed</span> <span class="s1">'/^$/d'</span> | <span class="se">\</span>
    <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/#.*$//g'</span> | <span class="se">\</span>
    <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^0\.0\.0\.0/127\.0\.0\.1/g'</span> | <span class="se">\</span>
    <span class="nb">sort</span> <span class="nt">-u</span> <span class="o">&gt;</span> adaway.txt
<span class="c"># wget -q https://warui.intaa.net/adhosts/whitelist.txt -O tmp-white.txt</span>
<span class="c"># cat tmp-white.txt | while read line</span>
<span class="c"># do</span>
<span class="c">#     sed -i -e '/$line/d' adaway.txt</span>
<span class="c"># done</span>
<span class="c"># whitelist</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'/apis.google.com/d'</span> adaway.txt
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'/google-analytics.l.google.com/d'</span> adaway.txt
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'/google-analytics.com/d'</span> adaway.txt
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s1">'s/127.0.0.1 //g'</span> adaway.txt
<span class="nb">echo</span> <span class="nt">-n</span> <span class="s1">''</span> <span class="o">&gt;</span> adaway_hosts.txt
<span class="nb">cat </span>adaway.txt | <span class="k">while </span><span class="nb">read </span>line
<span class="k">do
    </span><span class="nb">echo </span>0.0.0.0 <span class="nv">$line</span> <span class="o">&gt;&gt;</span> adaway_hosts.txt
<span class="k">done</span>
<span class="c"># nginx hosts</span>
<span class="nb">cat </span>adaway_hosts.txt | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^0\.0\.0\.0/server_name/g'</span> <span class="nt">-e</span> <span class="s1">'s/$/;/g'</span> <span class="o">&gt;</span> adaway_nginx_hosts.txt
<span class="c">## ipv6</span>
<span class="c"># cat adaway.txt | sed -e 's/127.0.0.1/::1/g' &gt; adaway_ipv6.txt</span>
<span class="c"># cat adaway.txt &gt;&gt; adaway_ipv6.txt</span>
<span class="c"># mv adaway_ipv6.txt adaway.txt</span>
<span class="nb">echo</span> <span class="s2">"cleanup"</span>
<span class="nb">rm</span> <span class="nt">-f</span> tmp-list.txt
<span class="nb">rm</span> <span class="nt">-f</span> tmp-white.txt</code></pre></figure>

<p>
リストを保守して下さっている皆様に感謝.
</p>
</div>
</div>
<div>
<h2 id="org2b656e91"><code>/etc/squid/squid.conf</code></h2>
<div class="outline-text-2" id="text-org2b656e91">
<p>
起動する前に <code>security_file_certgen</code> のファイル置き場を作成しておくと良い.
</p>
<pre class="example">
% sudo -u proxy /usr/lib/squid/security_file_certgen \
       -s /var/spool/squid/ssl_db -M 4B
</pre>

<p>
現在の設定ファイルは以下の通り
</p>

<ul class="org-ul">
<li>キャッシュはしない(した方が良いのかな…?)</li>
<li>本気で匿名化したいわけでも無いので, ヘッダの処理は適当</li>
<li>20080 番で動作</li>
</ul>

<p>
といった所.
SSL-Bump(MTM)用の証明書は適宜作成しておく.
</p>

<figure class="highlight"><pre><code class="language-conf" data-lang="conf"><span class="c">## Adblock
## DNS
# read hosts file -&gt; 0.0.0.0
</span><span class="n">hosts_file</span> /<span class="n">etc</span>/<span class="n">squid</span>/<span class="n">adaway_hosts</span>.<span class="n">txt</span>
<span class="n">acl</span> <span class="n">ad_black</span> <span class="n">dstdomain</span> <span class="s2">"/etc/squid/adaway.txt"</span>
<span class="n">http_access</span> <span class="n">deny</span> <span class="n">ad_black</span>
<span class="c"># Custom Error Page (force empty)
</span><span class="n">error_directory</span> /<span class="n">etc</span>/<span class="n">squid</span>/<span class="n">error</span>/
<span class="c"># dns_v4_first on
</span><span class="n">dns_nameservers</span> <span class="m">127</span>.<span class="m">0</span>.<span class="m">0</span>.<span class="m">1</span>

<span class="c">## ACL
</span><span class="n">acl</span> <span class="n">local</span> <span class="n">src</span> <span class="m">192</span>.<span class="m">168</span>.<span class="m">122</span>.<span class="m">0</span>/<span class="m">24</span> <span class="m">127</span>.<span class="m">0</span>.<span class="m">0</span>.<span class="m">1</span> ::<span class="m">1</span> <span class="n">fe80</span>::/<span class="m">10</span>
<span class="n">http_access</span> <span class="n">allow</span> <span class="n">local</span>
<span class="n">http_access</span> <span class="n">deny</span> <span class="n">all</span>
<span class="c">## access port
#
# 20080 番で動作
#
# http_port 20080
</span><span class="n">http_port</span> <span class="m">20080</span> <span class="n">ssl</span>-<span class="n">bump</span> \
 <span class="n">generate</span>-<span class="n">host</span>-<span class="n">certificates</span>=<span class="n">on</span> \
 <span class="n">dynamic_cert_mem_cache_size</span>=<span class="m">4</span><span class="n">MB</span> \
 <span class="n">cert</span>=/<span class="n">usr</span>/<span class="n">local</span>/<span class="n">share</span>/<span class="n">ca</span>-<span class="n">certificates</span>/<span class="n">junkhub</span>.<span class="n">org</span>/<span class="n">iris_cert</span>.<span class="n">crt</span> \
 <span class="n">key</span>=/<span class="n">usr</span>/<span class="n">local</span>/<span class="n">share</span>/<span class="n">ca</span>-<span class="n">certificates</span>/<span class="n">junkhub</span>.<span class="n">org</span>/<span class="n">iris_key</span>.<span class="n">pem</span> \
 <span class="n">tls</span>-<span class="n">dh</span>=<span class="n">prime256v1</span>:/<span class="n">etc</span>/<span class="n">squid</span>/<span class="n">dhparam</span>.<span class="n">pem</span>
<span class="n">sslcrtd_program</span> /<span class="n">usr</span>/<span class="n">lib</span>/<span class="n">squid</span>/<span class="n">security_file_certgen</span> \
  -<span class="n">s</span> /<span class="n">var</span>/<span class="n">spool</span>/<span class="n">squid</span>/<span class="n">ssl_db</span> \
  -<span class="n">M</span> <span class="m">4</span><span class="n">MB</span>
<span class="c"># sslcrtd_children 32 startup=5 idle=1
</span><span class="n">sslproxy_cert_sign_hash</span> <span class="n">sha256</span>
<span class="n">tls_outgoing_options</span> \
  <span class="n">cafile</span>=/<span class="n">etc</span>/<span class="n">ssl</span>/<span class="n">certs</span>/<span class="n">ca</span>-<span class="n">certificates</span>.<span class="n">crt</span> \
  <span class="n">options</span>=<span class="n">NO_SSLv2</span>,<span class="n">NO_SSLv3</span>,<span class="n">ALL</span>
<span class="n">acl</span> <span class="n">step1</span> <span class="n">at_step</span> <span class="n">SslBump1</span>
<span class="n">acl</span> <span class="n">ssl_exclude_domains</span> <span class="n">dstdomain</span> <span class="s2">"/etc/squid/ssl_white.txt"</span>
<span class="n">ssl_bump</span> <span class="n">splice</span> <span class="n">ssl_exclude_domains</span>
<span class="n">ssl_bump</span> <span class="n">peek</span> <span class="n">step1</span>
<span class="n">ssl_bump</span> <span class="n">bump</span> <span class="n">all</span>

<span class="c">## ICAP
</span><span class="n">icap_enable</span> <span class="n">off</span>

<span class="c">## ICMP
#
# disable all ICMP request
#
</span><span class="n">pinger_enable</span> <span class="n">off</span>
<span class="n">query_icmp</span> <span class="n">off</span>

<span class="c">## Log Format
#
# Apache like
#
# access_log stdio:/var/log/squid/access.log common
# logformat common %&gt;a %ui %un [%tl] "%rm %ru HTTP/%rv" &gt;Hs %&lt;st %Ss:%Sh
</span><span class="n">access_log</span> <span class="n">stdio</span>:/<span class="n">dev</span>/<span class="n">null</span> <span class="n">common</span>

<span class="c"># Logs are managed by logrotate on Debian
# @see include /etc/squid/conf.d/debian.conf
</span><span class="n">logfile_rotate</span> <span class="m">0</span>


<span class="c">## Cache
#
# don't use any cache
#
# no_cache deny all
</span><span class="n">cache_store_log</span> <span class="n">none</span>
<span class="n">cache_access_log</span> <span class="n">none</span>
<span class="n">cache_log</span> /<span class="n">dev</span>/<span class="n">null</span>
<span class="n">logfile_rotate</span> <span class="m">0</span>
<span class="n">coredump_dir</span> /<span class="n">var</span>/<span class="n">spool</span>/<span class="n">squid</span>
<span class="n">ipcache_size</span> <span class="m">0</span>

<span class="c">## Anonymous
# forwarded_for transparent
</span><span class="n">forwarded_for</span> <span class="n">off</span>
<span class="n">visible_hostname</span> <span class="n">unknown</span>
<span class="n">request_header_access</span> <span class="n">X</span>-<span class="n">FORWARDED</span>-<span class="n">FOR</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">request_header_access</span> <span class="n">VIA</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">request_header_access</span> <span class="n">CACHE</span>-<span class="n">CONTROL</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">request_header_access</span> <span class="n">If</span>-<span class="n">MODIFIED</span>-<span class="n">SINCE</span> <span class="n">deny</span> <span class="n">all</span>
<span class="c"># request_header_access CONNECTION deny all
</span><span class="n">request_header_access</span> <span class="n">UPGRADE</span>-<span class="n">INSECURE</span>-<span class="n">REQUESTS</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">request_header_access</span> <span class="n">DNT</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">reply_header_access</span> <span class="n">X</span>-<span class="n">FORWARDED</span>-<span class="n">FOR</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">reply_header_access</span> <span class="n">VIA</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">reply_header_access</span> <span class="n">CACHE</span>-<span class="n">CONTROL</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">reply_header_access</span> <span class="n">If</span>-<span class="n">MODIFIED</span>-<span class="n">SINCE</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">reply_header_access</span> <span class="n">UPGRADE</span>-<span class="n">INSECURE</span>-<span class="n">REQUESTS</span> <span class="n">deny</span> <span class="n">all</span>
<span class="n">reply_header_access</span> <span class="n">DNT</span> <span class="n">deny</span> <span class="n">all</span>

<span class="n">pid_filename</span> /<span class="n">run</span>/<span class="n">squid</span>.<span class="n">pid</span>
<span class="c">## fast
</span><span class="n">pipeline_prefetch</span> <span class="m">0</span>
<span class="n">shutdown_lifetime</span> <span class="m">0</span>.<span class="m">01</span> <span class="n">seconds</span>

<span class="c">#
</span><span class="n">always_direct</span> <span class="n">allow</span> <span class="n">local</span></code></pre></figure>
</div>
</div>

        </div>
      </main>
      <a href="#" class="back_to_top">Back to Top &#9650;</a>
      <hr/>
      <footer>
        <p>&copy; 2006-2021
  <a href="mailto:uwabami@gfd-dennou.org">Youhei SASAKI</a>,
  Lastupdate: 2021-08-31 00:12:26 +0000
  <br/>
  Powered by
  <a href="https://orgmode.org/" rel="noopener" title="Org mode">
    Org mode
  </a>
  +
  <a href="https://jekyllrb.com/" rel="noopener" title="Jekyll">
    Jekyll
  </a>
  +
  <a href="https://picocss.com/" rel="noopener" title="pico.css">
    Pico.css
  </a>
  &amp;
  <a href="https://amp.dev/">
    <span class="icon-amp">⚡</span>AMP
  </a>
</p>

      </footer>
    </div>
    <amp-analytics data-block-on-consent
               type="googleanalytics"
               config="https://uwabami.github.io/assets/ga4.json"
               data-credentials="include"
		       data-block-on-consent>
  <script type="application/json">
    {
        "vars": {
            "GA4_MEASUREMENT_ID": "UA-90872419-1",
            "GA4_ENDPOINT_HOSTNAME": "www.google-analytics.com",
            "DEFAULT_PAGEVIEW_ENABLED": true,
            "GOOGLE_CONSENT_ENABLED": true,
            "WEBVITALS_TRACKING": false,
            "PERFORMANCE_TIMING_TRACKING": false
        }
    }
  </script>
</amp-analytics>

  </body>
</html>
