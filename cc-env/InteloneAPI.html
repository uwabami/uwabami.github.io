<!doctype html>
<html ⚡ lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    <link rel="preconnect dns-prefetch" href="//cdn.ampproject.org" crossorigin>
    <link rel="preconnect dns-prefetch" href="//uwabami.github.io/" crossorigin>
    <!-- amp preload -->
    <link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js">
    <link rel="preload" as="font" type="font/woff2" href="/assets/fonts/ComicNeueSubset.woff2" crossorigin>
    <!-- end amp preload -->
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-geo" src="https://cdn.ampproject.org/v0/amp-geo-0.1.js"></script>
    <script async custom-element="amp-consent" src="https://cdn.ampproject.org/v0/amp-consent-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
    <style amp-custom>:root{--font-family: sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", Symbola;--line-height: 1.5;--font-weight: 400;--font-size: 16px;--border-radius: 0.25rem;--border-width: 1px;--outline-width: 3px;--spacing: 1rem;--typography-spacing-vertical: 1.5rem;--block-spacing-vertical: calc(var(--spacing) * 2);--block-spacing-horizontal: var(--spacing);--grid-spacing-vertical: 0;--grid-spacing-horizontal: var(--spacing);--form-element-spacing-vertical: 0.75rem;--form-element-spacing-horizontal: 1rem;--nav-element-spacing-vertical: 1rem;--nav-element-spacing-horizontal: 0.5rem;--nav-link-spacing-vertical: 0.5rem;--nav-link-spacing-horizontal: 0.5rem;--form-label-font-weight: var(--font-weight);--transition: 0.2s ease-in-out;--modal-overlay-backdrop-filter: blur(0.25rem)}@media(min-width: 576px){:root{--font-size: 17px}}@media(min-width: 768px){:root{--font-size: 18px}}@media(min-width: 992px){:root{--font-size: 19px}}@media(min-width: 1200px){:root{--font-size: 20px}}@media(min-width: 576px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 2.5)}}@media(min-width: 768px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 3)}}@media(min-width: 992px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 3.5)}}@media(min-width: 1200px){body>header,body>main,body>footer,section{--block-spacing-vertical: calc(var(--spacing) * 4)}}@media(min-width: 576px){article{--block-spacing-horizontal: calc(var(--spacing) * 1.25)}}@media(min-width: 768px){article{--block-spacing-horizontal: calc(var(--spacing) * 1.5)}}@media(min-width: 992px){article{--block-spacing-horizontal: calc(var(--spacing) * 1.75)}}@media(min-width: 1200px){article{--block-spacing-horizontal: calc(var(--spacing) * 2)}}dialog>article{--block-spacing-vertical: calc(var(--spacing) * 2);--block-spacing-horizontal: var(--spacing)}@media(min-width: 576px){dialog>article{--block-spacing-vertical: calc(var(--spacing) * 2.5);--block-spacing-horizontal: calc(var(--spacing) * 1.25)}}@media(min-width: 768px){dialog>article{--block-spacing-vertical: calc(var(--spacing) * 3);--block-spacing-horizontal: calc(var(--spacing) * 1.5)}}a{--text-decoration: none}a.secondary,a.contrast{--text-decoration: underline}small{--font-size: 0.875em}h1,h2,h3,h4,h5,h6{--font-weight: normal}h1{--font-size: 2rem}h2{--font-size: 1.75rem;border-bottom:1px solid #5af;font-weight:normal;padding:0;margin:1rem 0 0 0}h3{--font-size: 1.5rem;border-bottom:1px dashed #5af;font-weight:normal;margin:1rem 0 0 0}h4{--font-size: 1.25rem;border-bottom:1px dotted #5af;font-weight:normal;margin:1rem 0 0 0}h5{--font-size: 1.125rem;border-bottom:1px dashed #333;font-weight:normal;margin:1rem 0 0 0}h6{--font-size: 1.05rem;border-bottom:1px dashed #333;font-weight:normal;margin:1rem 0 0 0}strong{font-weight:normal;font-size:1.75em}[type=checkbox],[type=radio]{--border-width: 2px}[type=checkbox][role=switch]{--border-width: 3px}thead th,thead td,tfoot th,tfoot td{--border-width: 3px}:not(thead,tfoot)>*>td{--font-size: 0.875em}pre,code,kbd,samp{--font-family: "Menlo", "Cascadia", "Cascadia Code", "Cascadia Mono", "Consolas", "Monaco", monospace, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", Symbola}kbd{--font-weight: bolder}:root{--background-color: #fff;--color: hsl(205, 20%, 32%);--h1-color: hsl(205, 30%, 15%);--h2-color: #24333e;--h3-color: hsl(205, 25%, 23%);--h4-color: #374956;--h5-color: hsl(205, 20%, 32%);--h6-color: #4d606d;--muted-color: hsl(205, 10%, 50%);--muted-border-color: hsl(205, 20%, 94%);--primary: hsl(195, 85%, 41%);--primary-hover: hsl(195, 90%, 32%);--primary-focus: rgba(16, 149, 193, 0.125);--primary-inverse: #fff;--secondary: hsl(205, 15%, 41%);--secondary-hover: hsl(205, 20%, 32%);--secondary-focus: rgba(89, 107, 120, 0.125);--secondary-inverse: #fff;--contrast: hsl(205, 30%, 15%);--contrast-hover: #000;--contrast-focus: rgba(89, 107, 120, 0.125);--contrast-inverse: #fff;--mark-background-color: #fff2ca;--mark-color: #543a26;--ins-color: #388e3c;--del-color: #c62828;--blockquote-border-color: var(--muted-border-color);--blockquote-footer-color: var(--muted-color);--button-box-shadow: 0 0 0 rgba(0, 0, 0, 0);--button-hover-box-shadow: 0 0 0 rgba(0, 0, 0, 0);--form-element-background-color: transparent;--form-element-border-color: hsl(205, 14%, 68%);--form-element-color: var(--color);--form-element-placeholder-color: var(--muted-color);--form-element-active-background-color: transparent;--form-element-active-border-color: var(--primary);--form-element-focus-color: var(--primary-focus);--form-element-disabled-background-color: hsl(205, 18%, 86%);--form-element-disabled-border-color: hsl(205, 14%, 68%);--form-element-disabled-opacity: 0.5;--form-element-invalid-border-color: #c62828;--form-element-invalid-active-border-color: #d32f2f;--form-element-invalid-focus-color: rgba(211, 47, 47, 0.125);--form-element-valid-border-color: #388e3c;--form-element-valid-active-border-color: #43a047;--form-element-valid-focus-color: rgba(67, 160, 71, 0.125);--switch-background-color: hsl(205, 16%, 77%);--switch-color: var(--primary-inverse);--switch-checked-background-color: var(--primary);--range-border-color: hsl(205, 18%, 86%);--range-active-border-color: hsl(205, 16%, 77%);--range-thumb-border-color: var(--background-color);--range-thumb-color: var(--secondary);--range-thumb-hover-color: var(--secondary-hover);--range-thumb-active-color: var(--primary);--table-border-color: var(--muted-border-color);--table-row-stripped-background-color: #f6f8f9;--code-background-color: hsl(210, 28%, 97%);--code-color: var(--muted-color);--code-kbd-background-color: var(--contrast);--code-kbd-color: var(--contrast-inverse);--code-tag-color: hsl(330, 40%, 50%);--code-property-color: hsl(185, 40%, 40%);--code-value-color: hsl(40, 20%, 50%);--code-comment-color: hsl(205, 14%, 68%);--accordion-border-color: var(--muted-border-color);--accordion-close-summary-color: var(--color);--accordion-open-summary-color: var(--muted-color);--card-background-color: var(--background-color);--card-border-color: var(--muted-border-color);--card-box-shadow: 0.0145rem 0.029rem 0.174rem rgba(27, 40, 50, 0.01698), 0.0335rem 0.067rem 0.402rem rgba(27, 40, 50, 0.024), 0.0625rem 0.125rem 0.75rem rgba(27, 40, 50, 0.03), 0.1125rem 0.225rem 1.35rem rgba(27, 40, 50, 0.036), 0.2085rem 0.417rem 2.502rem rgba(27, 40, 50, 0.04302), 0.5rem 1rem 6rem rgba(27, 40, 50, 0.06), 0 0 0 0.0625rem rgba(27, 40, 50, 0.015);--card-sectionning-background-color: #fbfbfc;--dropdown-background-color: #fbfbfc;--dropdown-border-color: #e1e6eb;--dropdown-box-shadow: var(--card-box-shadow);--dropdown-color: var(--color);--dropdown-hover-background-color: hsl(205, 20%, 94%);--modal-overlay-background-color: rgba(213, 220, 226, 0.7);--progress-background-color: hsl(205, 18%, 86%);--progress-color: var(--primary);--loading-spinner-opacity: 0.5;--tooltip-background-color: var(--contrast);--tooltip-color: var(--contrast-inverse)}progress,[type=checkbox],[type=radio],[type=range]{accent-color:var(--primary)}*,*::before,*::after{box-sizing:border-box;background-repeat:no-repeat}::before,::after{text-decoration:inherit;vertical-align:inherit}:where(:root){-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-text-size-adjust:100%;text-size-adjust:100%;background-color:var(--background-color);color:var(--color);font-weight:var(--font-weight);font-size:var(--font-size);line-height:var(--line-height);font-family:var(--font-family);text-rendering:optimizeLegibility;overflow-wrap:break-word;cursor:default;tab-size:4}main{display:block}body{width:100%;margin:0}body>header,body>main,body>footer{width:100%;margin-right:auto;margin-left:auto;padding:var(--block-spacing-vertical) 0}.container,.container-fluid{width:100%;margin-right:auto;margin-left:auto;padding-right:var(--spacing);padding-left:var(--spacing)}@media(min-width: 576px){.container{max-width:510px;padding-right:0;padding-left:0}}@media(min-width: 768px){.container{max-width:700px}}@media(min-width: 992px){.container{max-width:920px}}@media(min-width: 1200px){.container{max-width:1130px}}section{margin-bottom:var(--block-spacing-vertical)}.grid{grid-column-gap:var(--grid-spacing-horizontal);grid-row-gap:var(--grid-spacing-vertical);display:grid;grid-template-columns:1fr;margin:0}@media(min-width: 992px){.grid{grid-template-columns:repeat(auto-fit, minmax(0%, 1fr))}}.grid>*{min-width:0}figure{display:block;margin:0;padding:0;overflow-x:auto}figure figcaption{padding:calc(var(--spacing)*.5) 0;color:var(--muted-color)}b,strong{font-weight:bolder}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}address,blockquote,dl,figure,form,ol,p,pre,table,ul{margin-top:0;margin-bottom:var(--typography-spacing-vertical);color:var(--color);font-style:normal;font-weight:var(--font-weight);font-size:var(--font-size)}a,[role=link]{--color: var(--primary);--background-color: transparent;outline:none;background-color:var(--background-color);color:var(--color);text-decoration:var(--text-decoration);transition:background-color var(--transition),color var(--transition),text-decoration var(--transition),box-shadow var(--transition)}a:is([aria-current],:hover,:active,:focus),[role=link]:is([aria-current],:hover,:active,:focus){--color: var(--primary-hover);--text-decoration: underline}a:focus,[role=link]:focus{--background-color: var(--primary-focus)}a.secondary,[role=link].secondary{--color: var(--secondary)}a.secondary:is([aria-current],:hover,:active,:focus),[role=link].secondary:is([aria-current],:hover,:active,:focus){--color: var(--secondary-hover)}a.secondary:focus,[role=link].secondary:focus{--background-color: var(--secondary-focus)}a.contrast,[role=link].contrast{--color: var(--contrast)}a.contrast:is([aria-current],:hover,:active,:focus),[role=link].contrast:is([aria-current],:hover,:active,:focus){--color: var(--contrast-hover)}a.contrast:focus,[role=link].contrast:focus{--background-color: var(--contrast-focus)}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:var(--typography-spacing-vertical);color:var(--color);font-weight:var(--font-weight);font-size:var(--font-size);font-family:var(--font-family)}h1{--color: var(--h1-color)}h2{--color: var(--h2-color)}h3{--color: var(--h3-color)}h4{--color: var(--h4-color)}h5{--color: var(--h5-color)}h6{--color: var(--h6-color)}:where(address,blockquote,dl,figure,form,ol,p,pre,table,ul)~:is(h1,h2,h3,h4,h5,h6){margin-top:var(--typography-spacing-vertical)}hgroup,.headings{margin-bottom:var(--typography-spacing-vertical)}hgroup>*,.headings>*{margin-bottom:0}hgroup>*:last-child,.headings>*:last-child{--color: var(--muted-color);--font-weight: unset;font-size:1rem;font-family:unset}p{margin-bottom:var(--typography-spacing-vertical)}small{font-size:var(--font-size)}:where(dl,ol,ul){padding-right:0;padding-left:var(--spacing);padding-inline-start:var(--spacing);padding-inline-end:0}:where(dl,ol,ul) li{margin-bottom:calc(var(--typography-spacing-vertical)*.25)}:where(dl,ol,ul) :is(dl,ol,ul){margin:0;margin-top:calc(var(--typography-spacing-vertical)*.25)}ul li{list-style:square}mark{padding:.125rem .25rem;background-color:var(--mark-background-color);color:var(--mark-color);vertical-align:baseline}blockquote{display:block;margin:var(--typography-spacing-vertical) 0;padding:var(--spacing);border-right:none;border-left:.25rem solid var(--blockquote-border-color);border-inline-start:.25rem solid var(--blockquote-border-color);border-inline-end:none}blockquote footer{margin-top:calc(var(--typography-spacing-vertical)*.5);color:var(--blockquote-footer-color)}abbr[title]{border-bottom:1px dotted;text-decoration:none;cursor:help}ins{color:var(--ins-color);text-decoration:none}del{color:var(--del-color)}::selection{background-color:var(--primary-focus)}ul li{list-style:disc}dl{padding-left:0px}dd{margin-left:1rem}input,optgroup,select,textarea{margin:0;font-size:1rem;line-height:var(--line-height);font-family:inherit;letter-spacing:inherit}input{overflow:visible}select{text-transform:none}legend{max-width:100%;padding:0;color:inherit;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{padding:0}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{padding:0;border-style:none}:-moz-focusring{outline:none}:-moz-ui-invalid{box-shadow:none}::-ms-expand{display:none}[type=file],[type=range]{padding:0;border-width:0}input:not([type=checkbox],[type=radio],[type=range]){height:calc(1rem*var(--line-height) + var(--form-element-spacing-vertical)*2 + var(--border-width)*2)}fieldset{margin:0;margin-bottom:var(--spacing);padding:0;border:0}label,fieldset legend{display:block;margin-bottom:calc(var(--spacing)*.25);font-weight:var(--form-label-font-weight, var(--font-weight))}input:not([type=checkbox],[type=radio]),select,textarea{width:100%}input:not([type=checkbox],[type=radio],[type=range],[type=file]),select,textarea{appearance:none;padding:var(--form-element-spacing-vertical) var(--form-element-spacing-horizontal)}input,select,textarea{--background-color: var(--form-element-background-color);--border-color: var(--form-element-border-color);--color: var(--form-element-color);--box-shadow: none;border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}input:not([type=submit],[type=button],[type=reset],[type=checkbox],[type=radio],[readonly]):is(:active,:focus),:where(select,textarea):is(:active,:focus){--background-color: var(--form-element-active-background-color)}input:not([type=submit],[type=button],[type=reset],[role=switch],[readonly]):is(:active,:focus),:where(select,textarea):is(:active,:focus){--border-color: var(--form-element-active-border-color)}input:not([type=submit],[type=button],[type=reset],[type=range],[type=file],[readonly]):focus,select:focus,textarea:focus{--box-shadow: 0 0 0 var(--outline-width) var(--form-element-focus-color)}input:not([type=submit],[type=button],[type=reset])[disabled],select[disabled],textarea[disabled],:where(fieldset[disabled]) :is(input:not([type=submit],[type=button],[type=reset]),select,textarea){--background-color: var(--form-element-disabled-background-color);--border-color: var(--form-element-disabled-border-color);opacity:var(--form-element-disabled-opacity);pointer-events:none}:where(input,select,textarea):not([type=checkbox],[type=radio],[type=date],[type=datetime-local],[type=month],[type=time],[type=week])[aria-invalid]{padding-right:calc(var(--form-element-spacing-horizontal) + 1.5rem);padding-left:var(--form-element-spacing-horizontal);padding-inline-start:var(--form-element-spacing-horizontal);padding-inline-end:calc(var(--form-element-spacing-horizontal) + 1.5rem);background-position:center right .75rem;background-size:1rem auto;background-repeat:no-repeat}:where(input,select,textarea):not([type=checkbox],[type=radio],[type=date],[type=datetime-local],[type=month],[type=time],[type=week])[aria-invalid=false]{background-image:var(--icon-valid)}:where(input,select,textarea):not([type=checkbox],[type=radio],[type=date],[type=datetime-local],[type=month],[type=time],[type=week])[aria-invalid=true]{background-image:var(--icon-invalid)}:where(input,select,textarea)[aria-invalid=false]{--border-color: var(--form-element-valid-border-color)}:where(input,select,textarea)[aria-invalid=false]:is(:active,:focus){--border-color: var(--form-element-valid-active-border-color);--box-shadow: 0 0 0 var(--outline-width) var(--form-element-valid-focus-color)}:where(input,select,textarea)[aria-invalid=true]{--border-color: var(--form-element-invalid-border-color)}:where(input,select,textarea)[aria-invalid=true]:is(:active,:focus){--border-color: var(--form-element-invalid-active-border-color);--box-shadow: 0 0 0 var(--outline-width) var(--form-element-invalid-focus-color)}[dir=rtl] :where(input,select,textarea):not([type=checkbox],[type=radio]):is([aria-invalid],[aria-invalid=true],[aria-invalid=false]){background-position:center left .75rem}input::placeholder,input::-webkit-input-placeholder,textarea::placeholder,textarea::-webkit-input-placeholder,select:invalid{color:var(--form-element-placeholder-color);opacity:1}input:not([type=checkbox],[type=radio]),select,textarea{margin-bottom:var(--spacing)}select::-ms-expand{border:0;background-color:rgba(0,0,0,0)}select:not([multiple],[size]){padding-right:calc(var(--form-element-spacing-horizontal) + 1.5rem);padding-left:var(--form-element-spacing-horizontal);padding-inline-start:var(--form-element-spacing-horizontal);padding-inline-end:calc(var(--form-element-spacing-horizontal) + 1.5rem);background-image:var(--icon-chevron);background-position:center right .75rem;background-size:1rem auto;background-repeat:no-repeat}[dir=rtl] select:not([multiple],[size]){background-position:center left .75rem}:where(input,select,textarea,.grid)+small{display:block;width:100%;margin-top:calc(var(--spacing)*-0.75);margin-bottom:var(--spacing);color:var(--muted-color)}label>:where(input,select,textarea){margin-top:calc(var(--spacing)*.25)}[type=color]::-webkit-color-swatch-wrapper{padding:0}[type=color]::-moz-focus-inner{padding:0}[type=color]::-webkit-color-swatch{border:0;border-radius:calc(var(--border-radius)*.5)}[type=color]::-moz-color-swatch{border:0;border-radius:calc(var(--border-radius)*.5)}input:not([type=checkbox],[type=radio],[type=range],[type=file]):is([type=date],[type=datetime-local],[type=month],[type=time],[type=week]){--icon-position: 0.75rem;--icon-width: 1rem;padding-right:calc(var(--icon-width) + var(--icon-position));background-image:var(--icon-date);background-position:center right var(--icon-position);background-size:var(--icon-width) auto;background-repeat:no-repeat}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=time]{background-image:var(--icon-time)}[type=date]::-webkit-calendar-picker-indicator,[type=datetime-local]::-webkit-calendar-picker-indicator,[type=month]::-webkit-calendar-picker-indicator,[type=time]::-webkit-calendar-picker-indicator,[type=week]::-webkit-calendar-picker-indicator{width:var(--icon-width);margin-right:calc(var(--icon-width)*-1);margin-left:var(--icon-position);opacity:0}[dir=rtl] :is([type=date],[type=datetime-local],[type=month],[type=time],[type=week]){text-align:right}[type=file]{--color: var(--muted-color);padding:calc(var(--form-element-spacing-vertical)*.5) 0;border:0;border-radius:0;background:none}[type=file]::file-selector-button{--background-color: var(--secondary);--border-color: var(--secondary);--color: var(--secondary-inverse);margin-right:calc(var(--spacing)/2);margin-left:0;margin-inline-start:0;margin-inline-end:calc(var(--spacing)/2);padding:calc(var(--form-element-spacing-vertical)*.5) calc(var(--form-element-spacing-horizontal)*.5);border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);font-size:1rem;line-height:var(--line-height);text-align:center;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}[type=file]::file-selector-button:is(:hover,:active,:focus){--background-color: var(--secondary-hover);--border-color: var(--secondary-hover)}[type=file]::-webkit-file-upload-button{--background-color: var(--secondary);--border-color: var(--secondary);--color: var(--secondary-inverse);margin-right:calc(var(--spacing)/2);margin-left:0;margin-inline-start:0;margin-inline-end:calc(var(--spacing)/2);padding:calc(var(--form-element-spacing-vertical)*.5) calc(var(--form-element-spacing-horizontal)*.5);border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);font-size:1rem;line-height:var(--line-height);text-align:center;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}[type=file]::-webkit-file-upload-button:is(:hover,:active,:focus){--background-color: var(--secondary-hover);--border-color: var(--secondary-hover)}[type=file]::-ms-browse{--background-color: var(--secondary);--border-color: var(--secondary);--color: var(--secondary-inverse);margin-right:calc(var(--spacing)/2);margin-left:0;margin-inline-start:0;margin-inline-end:calc(var(--spacing)/2);padding:calc(var(--form-element-spacing-vertical)*.5) calc(var(--form-element-spacing-horizontal)*.5);border:var(--border-width) solid var(--border-color);border-radius:var(--border-radius);outline:none;background-color:var(--background-color);box-shadow:var(--box-shadow);color:var(--color);font-weight:var(--font-weight);font-size:1rem;line-height:var(--line-height);text-align:center;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}[type=file]::-ms-browse:is(:hover,:active,:focus){--background-color: var(--secondary-hover);--border-color: var(--secondary-hover)}[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:1.25rem;background:none}[type=range]::-webkit-slider-runnable-track{width:100%;height:.25rem;border-radius:var(--border-radius);background-color:var(--range-border-color);transition:background-color var(--transition),box-shadow var(--transition)}[type=range]::-moz-range-track{width:100%;height:.25rem;border-radius:var(--border-radius);background-color:var(--range-border-color);transition:background-color var(--transition),box-shadow var(--transition)}[type=range]::-ms-track{width:100%;height:.25rem;border-radius:var(--border-radius);background-color:var(--range-border-color);transition:background-color var(--transition),box-shadow var(--transition)}[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--range-thumb-border-color);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color var(--transition),transform var(--transition)}[type=range]::-moz-range-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--range-thumb-border-color);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color var(--transition),transform var(--transition)}[type=range]::-ms-thumb{-webkit-appearance:none;width:1.25rem;height:1.25rem;margin-top:-0.5rem;border:2px solid var(--range-thumb-border-color);border-radius:50%;background-color:var(--range-thumb-color);cursor:pointer;transition:background-color var(--transition),transform var(--transition)}[type=range]:hover,[type=range]:focus{--range-border-color: var(--range-active-border-color);--range-thumb-color: var(--range-thumb-hover-color)}[type=range]:active{--range-thumb-color: var(--range-thumb-active-color)}[type=range]:active::-webkit-slider-thumb{transform:scale(1.25)}[type=range]:active::-moz-range-thumb{transform:scale(1.25)}[type=range]:active::-ms-thumb{transform:scale(1.25)}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search]{padding-inline-start:calc(var(--form-element-spacing-horizontal) + 1.75rem);border-radius:5rem;background-image:var(--icon-search);background-position:center left 1.125rem;background-size:1rem auto;background-repeat:no-repeat}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid]{padding-inline-start:calc(var(--form-element-spacing-horizontal) + 1.75rem);background-position:center left 1.125rem,center right .75rem}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid=false]{background-image:var(--icon-search),var(--icon-valid)}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid=true]{background-image:var(--icon-search),var(--icon-invalid)}[type=search]::-webkit-search-cancel-button{-webkit-appearance:none;display:none}[dir=rtl] :where(input):not([type=checkbox],[type=radio],[type=range],[type=file])[type=search]{background-position:center right 1.125rem}[dir=rtl] :where(input):not([type=checkbox],[type=radio],[type=range],[type=file])[type=search][aria-invalid]{background-position:center right 1.125rem,center left .75rem}input:not([type=checkbox],[type=radio],[type=range],[type=file])[type=search]{background-image:url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='11' cy='11' r='8'></circle><line x1='21' y1='21' x2='16.65' y2='16.65'></line></svg>")}:where(table){width:100%;border-collapse:collapse;border-spacing:0;text-indent:0}th,td{padding:calc(var(--spacing)/2) var(--spacing);border-bottom:var(--border-width) solid var(--table-border-color);color:var(--color);font-weight:var(--font-weight);font-size:var(--font-size);text-align:left;text-align:start}tfoot th,tfoot td{border-top:var(--border-width) solid var(--table-border-color);border-bottom:0}table[role=grid] tbody tr:nth-child(odd){background-color:var(--table-row-stripped-background-color)}pre,code,kbd,samp{font-size:.875em;font-family:var(--font-family)}pre{-ms-overflow-style:scrollbar;overflow:auto}pre,code,kbd{border-radius:var(--border-radius);background:var(--code-background-color);font-weight:var(--font-weight);line-height:initial}code,kbd{display:inline-block;padding:.375rem .5rem}pre{display:block;margin-bottom:var(--spacing);overflow-x:auto}pre>code{display:block;padding:var(--spacing);background:none;line-height:var(--line-height)}kbd{background-color:var(--code-kbd-background-color);color:var(--code-kbd-color);vertical-align:baseline}figure.highlight{margin:0;padding:0;border:0;font-family:inherit}.highlight{font-family:inherit}.highlight{background-color:#f8f8f8}.highlight table td{padding:5px}.highlight table pre{margin:0}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .c{color:#998;font-style:italic}.highlight .ch{color:#998;font-style:italic}.highlight .cd{color:#998;font-style:italic}.highlight .cpf{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .gd{color:#000;background-color:#fdd}.highlight .ge{color:#000;font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{color:#000;font-weight:bold}.highlight .kd{color:#000;font-weight:bold}.highlight .kn{color:#000;font-weight:bold}.highlight .kp{color:#000;font-weight:bold}.highlight .kr{color:#000;font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .k{color:#000;font-weight:bold}.highlight .kv{color:#000;font-weight:bold}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .il{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .m{color:#099}.highlight .mb{color:#099}.highlight .mx{color:#099}.highlight .sa{color:#000;font-weight:bold}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .s{color:#d14}.highlight .dl{color:#d14}.highlight .na{color:teal}.highlight .bp{color:#999}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:teal}.highlight .nd{color:#3c5d5d;font-weight:bold}.highlight .ni{color:purple}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:#900;font-weight:bold}.highlight .fm{color:#900;font-weight:bold}.highlight .nl{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .vc{color:teal}.highlight .vg{color:teal}.highlight .vi{color:teal}.highlight .nv{color:teal}.highlight .vm{color:teal}.highlight .ow{color:#000;font-weight:bold}.highlight .o{color:#000;font-weight:bold}.highlight .w{color:#bbb}hr{height:0;border:0;border-top:1px solid var(--muted-border-color);color:inherit}[hidden],template{display:none}canvas{display:inline-block}details{display:block;margin-bottom:var(--spacing);padding-bottom:var(--spacing);border-bottom:var(--border-width) solid var(--accordion-border-color)}details summary{line-height:1rem;list-style-type:none;cursor:pointer;transition:color var(--transition)}details summary:not([role]){color:var(--accordion-close-summary-color)}details summary::-webkit-details-marker{display:none}details summary::marker{display:none}details summary::-moz-list-bullet{list-style-type:none}details summary::after{display:block;width:1rem;height:1rem;margin-inline-start:calc(var(--spacing, 1rem)*.5);float:right;transform:rotate(-90deg);background-image:var(--icon-chevron);background-position:right center;background-size:1rem auto;background-repeat:no-repeat;content:"";transition:transform var(--transition)}details summary:focus{outline:none}details summary:focus:not([role=button]){color:var(--accordion-active-summary-color)}details summary[role=button]{width:100%;text-align:left}details summary[role=button]::after{height:calc(1rem*var(--line-height, 1.5));background-image:var(--icon-chevron-button)}details summary[role=button]:not(.outline).contrast::after{background-image:var(--icon-chevron-button-inverse)}details[open]>summary{margin-bottom:calc(var(--spacing))}details[open]>summary:not([role]):not(:focus){color:var(--accordion-open-summary-color)}details[open]>summary::after{transform:rotate(0)}[dir=rtl] details summary{text-align:right}[dir=rtl] details summary::after{float:left;background-position:left center}:where(nav li)::before{float:left;content:"​"}nav,nav ul{display:flex}nav{justify-content:space-between}nav ol,nav ul{align-items:center;margin-bottom:0;padding:0;list-style:none}nav ol:first-of-type,nav ul:first-of-type{margin-left:calc(var(--nav-element-spacing-horizontal)*-1)}nav ol:last-of-type,nav ul:last-of-type{margin-right:calc(var(--nav-element-spacing-horizontal)*-1)}nav li{display:inline-block;margin:0;padding:var(--nav-element-spacing-vertical) var(--nav-element-spacing-horizontal)}nav li>*{--spacing: 0}nav :where(a,[role=link]){display:inline-block;margin:calc(var(--nav-link-spacing-vertical)*-1) calc(var(--nav-link-spacing-horizontal)*-1);padding:var(--nav-link-spacing-vertical) var(--nav-link-spacing-horizontal);border-radius:var(--border-radius);text-decoration:none}nav :where(a,[role=link]):is([aria-current],:hover,:active,:focus){text-decoration:none}nav[aria-label=breadcrumb]{align-items:center;justify-content:start}nav[aria-label=breadcrumb] ul li:not(:first-child){margin-inline-start:var(--nav-link-spacing-horizontal)}nav[aria-label=breadcrumb] ul li:not(:last-child) ::after{position:absolute;width:calc(var(--nav-link-spacing-horizontal)*2);margin-inline-start:calc(var(--nav-link-spacing-horizontal)/2);content:"/";color:var(--muted-color);text-align:center}nav[aria-label=breadcrumb] a[aria-current]{background-color:rgba(0,0,0,0);color:inherit;text-decoration:none;pointer-events:none}nav [role=button]{margin-right:inherit;margin-left:inherit;padding:var(--nav-link-spacing-vertical) var(--nav-link-spacing-horizontal)}aside nav,aside ol,aside ul,aside li{display:block}aside li{padding:calc(var(--nav-element-spacing-vertical)*.5) var(--nav-element-spacing-horizontal)}aside li a{display:block}aside li [role=button]{margin:inherit}[dir=rtl] nav[aria-label=breadcrumb] ul li:not(:last-child) ::after{content:"\\"}nav input:not([type=checkbox],[type=radio]),nav select,nav textarea{width:100%;max-width:300px}nav[aria-label=breadcrumb] ul li:not(:last-child) ::after{text-decoration:none}details[role=list],li[role=list]{position:relative}details[role=list] summary+ul,li[role=list]>ul{display:flex;z-index:99;position:absolute;top:auto;right:0;left:0;flex-direction:column;margin:0;padding:0;border:var(--border-width) solid var(--dropdown-border-color);border-radius:var(--border-radius);border-top-right-radius:0;border-top-left-radius:0;background-color:var(--dropdown-background-color);box-shadow:var(--card-box-shadow);color:var(--dropdown-color);white-space:nowrap}details[role=list] summary+ul li,li[role=list]>ul li{width:100%;margin-bottom:0;padding:calc(var(--form-element-spacing-vertical)*.5) var(--form-element-spacing-horizontal);list-style:none}details[role=list] summary+ul li:first-of-type,li[role=list]>ul li:first-of-type{margin-top:calc(var(--form-element-spacing-vertical)*.5)}details[role=list] summary+ul li:last-of-type,li[role=list]>ul li:last-of-type{margin-bottom:calc(var(--form-element-spacing-vertical)*.5)}details[role=list] summary+ul li a,li[role=list]>ul li a{display:block;margin:calc(var(--form-element-spacing-vertical)*-0.5) calc(var(--form-element-spacing-horizontal)*-1);padding:calc(var(--form-element-spacing-vertical)*.5) var(--form-element-spacing-horizontal);overflow:hidden;color:var(--dropdown-color);text-decoration:none;text-overflow:ellipsis}details[role=list] summary+ul li a:hover,li[role=list]>ul li a:hover{background-color:var(--dropdown-hover-background-color)}details[role=list] summary::after,li[role=list]>a::after{display:block;width:1rem;height:calc(1rem*var(--line-height, 1.5));margin-inline-start:.5rem;float:right;transform:rotate(0deg);background-position:right center;background-size:1rem auto;background-repeat:no-repeat;content:""}details[role=list]{padding:0;border-bottom:none}details[role=list] summary{margin-bottom:0}details[role=list] summary:not([role]){height:calc(1rem*var(--line-height) + var(--form-element-spacing-vertical)*2 + var(--border-width)*2);padding:var(--form-element-spacing-vertical) var(--form-element-spacing-horizontal);border:var(--border-width) solid var(--form-element-border-color);border-radius:var(--border-radius);background-color:var(--form-element-background-color);color:var(--form-element-placeholder-color);line-height:inherit;cursor:pointer;transition:background-color var(--transition),border-color var(--transition),color var(--transition),box-shadow var(--transition)}details[role=list] summary:not([role]):active,details[role=list] summary:not([role]):focus{border-color:var(--form-element-active-border-color);background-color:var(--form-element-active-background-color)}details[role=list] summary:not([role]):focus{box-shadow:0 0 0 var(--outline-width) var(--form-element-focus-color)}details[role=list][open] summary{border-bottom-right-radius:0;border-bottom-left-radius:0}details[role=list][open] summary::before{display:block;z-index:1;position:fixed;top:0;right:0;bottom:0;left:0;background:none;content:"";cursor:default}nav details[role=list] summary,nav li[role=list] a{display:flex;direction:ltr}nav details[role=list] summary+ul,nav li[role=list]>ul{min-width:fit-content;border-radius:var(--border-radius)}nav details[role=list] summary+ul li a,nav li[role=list]>ul li a{border-radius:0}nav details[role=list] summary,nav details[role=list] summary:not([role]){height:auto;padding:var(--nav-link-spacing-vertical) var(--nav-link-spacing-horizontal)}nav details[role=list][open] summary{border-radius:var(--border-radius)}nav details[role=list] summary+ul{margin-top:var(--outline-width);margin-inline-start:0}nav details[role=list] summary[role=link]{margin-bottom:calc(var(--nav-link-spacing-vertical)*-1);line-height:var(--line-height)}nav details[role=list] summary[role=link]+ul{margin-top:calc(var(--nav-link-spacing-vertical) + var(--outline-width));margin-inline-start:calc(var(--nav-link-spacing-horizontal)*-1)}li[role=list]:hover>ul,li[role=list] a:active~ul,li[role=list] a:focus~ul{display:flex}li[role=list]>ul{display:none;margin-top:calc(var(--nav-link-spacing-vertical) + var(--outline-width));margin-inline-start:calc(var(--nav-element-spacing-horizontal) - var(--nav-link-spacing-horizontal))}li[role=list]>a::after{background-image:var(--icon-chevron)}summary[role=link]{transition:color var(--transition)}summary[role=link]::-webkit-details-marker{display:none}summary[role=link]::marker{display:none}summary[role=link]::-moz-list-bullet{list-style-type:none}summary[role=link]::after{display:block;width:1rem;height:1rem;margin-inline-start:calc(var(--spacing, 1rem)*.5);float:right;transform:rotate(-90deg);background-image:url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(65, 84, 98)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg>");background-position:right center;background-size:1rem auto;background-repeat:no-repeat;content:"";transition:transform var(--transition)}[aria-controls]{cursor:pointer}[aria-disabled=true],[disabled]{cursor:not-allowed}[aria-hidden=false][hidden]{display:initial}[aria-hidden=false][hidden]:not(:focus){clip:rect(0, 0, 0, 0);position:absolute}a,area,button,input,label,select,summary,textarea,[tabindex]{-ms-touch-action:manipulation}[dir=rtl]{direction:rtl}@font-face{font-family:"Comic Neue";font-style:normal;font-weight:400;font-display:swap;src:local("Comic Neue"),local("Comic Neue"),url("/assets/fonts/ComicNeueSubset.woff2") format("woff2")}@font-face{font-family:"AoyagiKouzanTSubset";font-style:normal;font-weight:400;font-display:swap;src:local("AoyagiKouzanTSubset"),local("AoyagiKouzanTSubset"),url("/assets/fonts/AoyagiKouzanTSubset.woff2") format("woff2")}.title-font{font-family:"Comic Neue","AoyagiKouzanTSubset",sans-serif}#top{border-radius:80%}.wrapper{min-height:100%}header{position:sticky;top:0;background-color:var(--background-color);box-shadow:0 6px 10px -10px rgba(0,0,0,.7);margin-bottom:var(--spacing);z-index:100}header nav{--nav-element-spacing-vertical: 0.25rem;--form-element-spacing-vertical: 0.25rem;--typography-spacing-vertical: 0rem}.langselector{margin-left:auto}#table-of-contents{align-items:center;justify-content:start;border-bottom:1px solid rgba(0,0,0,.1);margin-bottom:10px;padding-bottom:10px}#table-of-contents h2{--font-size: 1rem;border:none}#table-of-contents h2:after{content:":";padding:0;margin:0;margin-right:var(--nav-link-spacing-horizontal)}#table-of-contents ul li:not(:first-child){margin-inline-start:var(--nav-link-spacing-horizontal)}#table-of-contents ul li:not(:last-child) ::after{position:absolute;width:calc(var(--nav-link-spacing-horizontal)*2);margin-inline-start:calc(var(--nav-link-spacing-horizontal)/2);content:"/";color:var(--muted-color);text-align:center;text-decoration:none}#table-of-contents a[aria-current]{background-color:rgba(0,0,0,0);color:inherit;text-decoration:none;pointer-events:none}footer p{text-align:right}.profile-picture{height:20vw;max-height:260px;width:20vw;max-width:260px;position:relative;float:right;border-radius:50%;margin-top:-1rem}.menu-btn{display:none}@media(min-width: 768px){.md-hide{display:none}.back_to_top{margin-left:85%}.title-font{font-size:3rem}}@media(max-width: 768px){.menu-icon{display:flex;height:60px;width:60px;justify-content:center;align-items:center;position:relative;z-index:200;cursor:pointer}.menu-icon span,.menu-icon span:before,.menu-icon span:after{content:"";display:block;height:3px;width:25px;border-radius:3px;background:#000;transition:.5s;position:absolute}.menu-icon span:before{bottom:8px}.menu-icon span:after{top:8px}#menu-btn:checked~.menu-icon span{background:#fff}#menu-btn:checked~.menu-icon span::before{bottom:0;transform:rotate(45deg)}#menu-btn:checked~.menu-icon span::after{top:0;transform:rotate(-45deg)}.menu{width:100%;height:100%;position:fixed;top:0;left:100%;z-index:200;background:#fff;transition:.5s;flex-direction:column;margin-top:120px}#menu-btn:checked~.menu{left:0;width:100%}.title-font{font-size:2rem}#table-of-contents{display:none}.sm-hide{display:none}.profile-picture{margin-top:-4rem}}.logo{border-radius:80%}.icon-envelope svg,.icon-key svg,.icon-keybase svg,.icon-twitter svg,.icon-facebook svg,.icon-github svg,.icon-mastodon svg,.icon-amp svg{height:1.2rem;width:1.2rem}.icon-envelope{color:#242424}.icon-key{color:#ff8c00}.icon-keybase{color:#ff8c00}.icon-twitter{color:#55acee}.icon-facebook{color:#3b5998}.icon-github{color:#4c4c4c}.icon-mastodon{color:#3b5998}.icon-amp{color:#ff851b}.research li:nth-child(even){background-color:#f5f5f5}.back_to_top{--offset: 90px;position:sticky;bottom:20px;margin-top:calc(100vh - var(--offset));margin-left:calc(100% - 20px - 6rem);text-decoration:none;padding:10px;color:#fff;background:#000;border-radius:100px;white-space:nowrap}.nowrap{white-space:pre}a:hover{text-decoration:underline}span.anchor{display:none}.sanchor{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAAAAAA6I3INAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAOAAAADgCxW/H3AAAAH0lEQVQI12M4jAIYDv9HAni4hw/Tmgt3E1YuiqtQAAD5Nq+Ne1ON1gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMi0wNy0zMVQxNTowNDowNCswOTowMONpTpcAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMDctMTAtMjhUMDc6NDY6MzArMDk6MDAE9UrdAAAAAElFTkSuQmCC);background-position:bottom right;background-repeat:no-repeat;padding:14px 14px 0px 0px;color:#fff;background-color:rgba(0,0,0,0);font-size:1px}.canchor{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAAAAABzHgM7AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAMAAAADADOpTJ+AAAAIElEQVQI12P4jwQYsHKOHDlCDAe3AVAOSDVcD24OAgAAVIGJOMkyXx4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTItMDctMzFUMTU6MDM6NTgrMDk6MDCO9TH+AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDA3LTEwLTI4VDA3OjQ2OjMwKzA5OjAwBPVK3QAAAABJRU5ErkJggg==);background-position:bottom right;background-repeat:no-repeat;padding:12px 12px 0px 0px;color:#fff;background-color:rgba(0,0,0,0);font-size:1px}.mail{display:none}.sanchor:before{display:block;content:" ";margin-top:-110px;height:110px;visibility:hidden}p.source{text-align:right;font-size:80%}p.source cite{font-style:normal}.day h2{font-size:1rem}.amp-htb{--nav-link-spacing-vertical: 0;--nav-link-spacing-horizontal: 0}.comment{display:none}.tdiary-profile-picture{border-radius:50%;width:30vw;max-width:260px;max-height:260px;margin-left:auto;margin-right:auto}@media(max-width: 768px){.tdiary-profile-picture{display:none}}.footer{display:block;margin:0 auto;text-align:right;width:100%}*[id]:before{display:block;content:" ";margin-top:-120px;height:120px;visibility:hidden}    </style>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <meta name="author" content="Youhei SASAKI">
    <!-- end: check google site verification -->
    <!-- alternate -->
    <link rel="alternate" hreflang="" href="https://uwabami.github.io/cc-env/InteloneAPI.html" />
    <!-- end: alternate -->
    <!-- begin jekyll seo -->
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Intel oneAPI でのお仕事環境の構築 | Youhei SASAKI’s official site</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Intel oneAPI でのお仕事環境の構築" />
<meta name="author" content="Youhei SASAKI" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://uwabami.github.io/cc-env/InteloneAPI.html" />
<meta property="og:url" content="https://uwabami.github.io/cc-env/InteloneAPI.html" />
<meta property="og:site_name" content="Youhei SASAKI’s official site" />
<meta property="og:image" content="https://uwabami.github.io/assets/img/eyecatch_1600x900.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-07T17:39:57+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://uwabami.github.io/assets/img/eyecatch_1600x900.png" />
<meta property="twitter:title" content="Intel oneAPI でのお仕事環境の構築" />
<meta name="twitter:site" content="@uwabami" />
<meta name="twitter:creator" content="@Youhei SASAKI" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Youhei SASAKI","url":"https://uwabami.github.io/"},"dateModified":"2021-10-07T17:39:57+09:00","datePublished":"2021-10-07T17:39:57+09:00","headline":"Intel oneAPI でのお仕事環境の構築","image":"https://uwabami.github.io/assets/img/eyecatch_1600x900.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://uwabami.github.io/cc-env/InteloneAPI.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://uwabami.github.io/assets/img/eyecatch_1600x900.png"},"name":"Youhei SASAKI"},"url":"https://uwabami.github.io/cc-env/InteloneAPI.html"}</script>
<!-- End Jekyll SEO tag -->
    <!-- end jekyll seo -->
    <link rel="icon" type="image/x-icon" href="https://uwabami.github.io/assets/img/favicon.ico">
    <!-- apple icons -->
    <link rel="apple-touch-icon" href="https://uwabami.github.io/assets/img/favicon-256x256.png">
    <link rel="shortcut-icon" type="image/ico" href="/assets/img/favicon.ico">
  </head>
  <body>
    <!-- include: gdpr -->
<amp-geo layout="nodisplay">
  <script type="application/json">
    {
        "ISOCountryGroups": {
            "eu": [ "preset-eea"]
        }
    }
  </script>
</amp-geo>
<amp-consent layout="nodisplay" id="consent-element">
  <script type="application/json">
    {
        "consents": {
            "my_consent": {
                "promptIfUnknownForGeoGroup": "eu",
                "promptUI": "consent-ui"
            }
        }
    }
  </script>
  <div id="consent-ui">
    <p>I use cookies to analyze how visitors use my website via Google Analytics:</p>
    <button on="tap:consent-element.accept" role="button">Accept</button>
    <button on="tap:consent-element.reject" role="button">Reject</button>
    <button on="tap:consent-element.dismiss" role="button">Dismiss</button>
  </div>
</amp-consent>
    <!-- end include: gdpr -->
    <div class="wrapper container">
      <header>
        <!-- page loop -->
<nav>
  <ul>
    <li>
      <a href="/index.en.html">
        <amp-img layout="fixed"
                 width="1.2rem"
                 height="1.2rem"
                 src="/assets/img/top.webp"
                 alt="About"
                 id="top">
          <amp-img fallback
                   layout="fixed"
                   width="1.2rem"
                   height="1.2rem"
                   src="/assets/img/top.jpg"
                   alt="About"
                   id="top">
          </amp-img>
        </amp-img>
      </a>
    </li>
  </ul>
  <input class="menu-btn" type="checkbox" id="menu-btn"/>
  <label class="menu-icon" for="menu-btn"><span></span></label>
  <ul class="menu">
    
    <li>
      <a href="/research/index.en.html">
        Research
      </a>
    </li>
    <li>
      <a href="/software/index.en.html">
        Repository
      </a>
    </li>
    <li>
      <form method="GET"
            action="https://www.google.com/cse"
            target="_top">
        <input name="cx"
               type="hidden"
               value="017455171263919107349:oumnpe4bynr" />
        <input name="ie" type="hidden" value="UTF-8" />
        <input type="search" placeholder="Search" name="q" required>
      </form>
    </li>
    
  </ul>
</nav>

        <nav aria-label="breadcrumb">
  <ul>
    <!-- create crumbs -->
    <li>
      <a href="/index.en.html">
        Top
      </a>
    </li>
    <li><a href="/cc-env/index.html">Cc-env</a></li>      <!-- end page loop -->
  </ul>
  <span class="langselector"><!-- end: lang selector -->
  </span>
</nav>

      </header>
      <main role="main">
        <div class="content">
          <h1 class="page-title">Intel oneAPI でのお仕事環境の構築</h1>
          <hr>
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li>
<a href="#orga431cbe7">始めに</a>
<ul>
<li><a href="#orgb2dc6604">導入と設定</a></li>
<li><a href="#org4c224bed">NetCDF</a></li>
<li><a href="#orgc15a8fa6">gtool5</a></li>
<li><a href="#org667b1d64">SPML: v0.8.0</a></li>
<li><a href="#orgb7f9c663"><span class="todo TODO">TODO</span> SPML: v2 (Git HEAD)</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
Related <a href="https://uwabami.github.io/cc-env/index.html">Index</a> <a href="index.html#orge0707863">Debian</a>
</p>
<div>
<h2 id="orga431cbe7">始めに</h2>
<div class="outline-text-2" id="text-orga431cbe7">
<p>
いつの頃からか定かではないのだが, Intel コンパイラなどの開発環境が
<a href="https://www.isus.jp/products/oneapi/oneapi-news-and-updates/">Intel oneAPI</a> として公開されていて, apt でインストールできる様になっている.
…まあ, 例によって設定スクリプトに未だ bashism が残っていたりするのがアレだけれど,
HPC 環境で Intel Compiler を使うことも多いので, テストに使う分には非常に助かるわけで.
</p>
</div>
<div>
<h3 id="orgb2dc6604">導入と設定</h3>
<div class="outline-text-3" id="text-orgb2dc6604">
<p>
この節は趣味の領域(飛ばして OK)
ビルドしたモノは <code>/usr/local/intel</code> 以下にインストールする予定なので
最低限
</p>
<ul class="org-ul">
<li><code>PATH=/usr/local/intel/bin:${PATH}</code></li>
<li><code>LD_LIBRARY_PATH=/usr/local/intel/lib:${LD_LIBRARY_APTH}</code></li>
</ul>
<p>
だけは設定しておくと良い.
</p>
</div>
<div>
<h4 id="orga7eb357b">導入</h4>
<div class="outline-text-4" id="text-orga7eb357b">
<p>
apt で導入します.
</p>

<p>
最近は deb822 形式で apt のソースを書いているので
以下のファイルを <code>/etc/apt/sources.list.d/oneapi.sources</code> として
作成します.
</p>
<pre class="example">
Types: deb
URIs:https://apt.repos.intel.com/oneapi
Suites: all
Components: main
Arch: amd64
Signed-by: /usr/local/share/keyrings/intel.asc
</pre>
<p>
続いて, 鍵を上記ファイルに置いておきます.
</p>
<pre class="example">
sudo wget https://repositories.intel.com/graphics/intel-graphics.key \
  -O /usr/local/share/keyrings/intel.asc
</pre>
<p>
インストールするパッケージは色々と選べるわけですが,
多過ぎて良くわからない.
とりあえずは以下の通り:
</p>
<pre class="example">
% sudo apt-get update
% sudo apt-get install cmake pkg-config build-essential
% sudo apt-get install intel-hpckit intel-hpckit-runtime
</pre>
<p>
何も考えずインストールしているので, かなり大きめです.
コーヒーでも呑みながら待ちましょう.
…ちなみに, WSL2 でも使えるらしいですね(プロファイラ回りの kernel module がどうなるのか知らんけど…).
</p>

<p>
なお, このパッケージは削除時に <code>/usr/local/share/pkgconfig</code> を削除します. <del>…雑なパッケージですねぇ.</del>
</p>
</div>
</div>
<div>
<h4 id="orgc5739144">設定</h4>
<div class="outline-text-4" id="text-orgc5739144">
<p>
安直に環境設定するなら
</p>
<pre class="example">
% source /opt/intel/oneapi/setvars.sh
</pre>
<p>
で良いです.
しかしながら, 目的は計算もさることがならテストですから環境を切り替えたいと思うのが人情と言うものです.
</p>

<p>
<code>setvars.sh</code> を眺めてみます.
</p>
<ul class="org-ul">
<li>453行目で
<code>component_array=$(command ls "${script_root}"/*/*/env/vars.sh 2&gt;/dev/null | awk 'NF')</code>
として, 読み込む設定ファイルをリストアップしてます.</li>
<li>これを <code>uniq</code> なんかを使って整理して, <code>source</code> してます.</li>
</ul>
<p>
というわけで, 実際にコンポーネントをリストアップしてみると….
</p>
<pre class="example">
% command ls /opt/intel/opneapi/*/*/env/vars.sh | awk 'NF' | grep latest | sort -u
/opt/intel/oneapi/advisor/latest/env/vars.sh
/opt/intel/oneapi/ccl/latest/env/vars.sh
/opt/intel/oneapi/clck/latest/env/vars.sh
/opt/intel/oneapi/compiler/latest/env/vars.sh
/opt/intel/oneapi/dal/latest/env/vars.sh
/opt/intel/oneapi/debugger/latest/env/vars.sh
/opt/intel/oneapi/dev-utilities/latest/env/vars.sh
/opt/intel/oneapi/dnnl/latest/env/vars.sh
/opt/intel/oneapi/dpcpp-ct/latest/env/vars.sh
/opt/intel/oneapi/dpl/latest/env/vars.sh
/opt/intel/oneapi/inspector/latest/env/vars.sh
/opt/intel/oneapi/intelpython/latest/env/vars.sh
/opt/intel/oneapi/ipp/latest/env/vars.sh
/opt/intel/oneapi/ippcp/latest/env/vars.sh
/opt/intel/oneapi/itac/latest/env/vars.sh
/opt/intel/oneapi/mkl/latest/env/vars.sh
/opt/intel/oneapi/mpi/latest/env/vars.sh
/opt/intel/oneapi/tbb/latest/env/vars.sh
/opt/intel/oneapi/vpl/latest/env/vars.sh
/opt/intel/oneapi/vtune/latest/env/vars.sh
</pre>
<p>
…いや, まあ, こんなに使わんのだが
(Data Sicnese やら Deep Learning やらで Python 関連が入るんだなぁ…).
というわけで, 整理して切り替え可能にした zsh 関数はこんな感じかな?
intel コンパイラでビルドした諸々は <code>/usr/local/intel</code> 以下に置くことにしている
</p>

<p>
変数設定
</p>
<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#! /bin/zsh</span>
<span class="c">## common</span>
<span class="nv">_ONEAPI_ROOT</span><span class="o">=</span>/opt/intel/oneapi
<span class="nv">_SETVARS_VARS_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vtune/latest/env/vars.sh
<span class="nv">_INTEL_LICENSE_FILE</span><span class="o">=</span>/opt/intel/licenses:<span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/intel/licenses
<span class="c">## Advisor</span>
<span class="nv">_ADVISOR_2021_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/advisor/2021.4.0
<span class="nv">_PYTHONPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ADVISOR_2021_DIR</span><span class="k">}</span>/pythonapi
<span class="nv">_APM</span><span class="o">=</span><span class="k">${</span><span class="nv">_ADVISOR_2021_DIR</span><span class="k">}</span>/perfmodels
<span class="c">#</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ADVISOR_2021_DIR</span><span class="k">}</span>/bin64
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ADVISOR_2021_DIR</span><span class="k">}</span>/include/pkgconfig/lib64
<span class="c"># CCL</span>
<span class="nv">_CCL_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/ccl/2021.4.0
<span class="nv">_CCL_CONFIGURATION</span><span class="o">=</span>cpu_gpu_dpcpp
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CCL_ROOT</span><span class="k">}</span>/lib/cpu_gpu_dpcpp
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CCL_ROOT</span><span class="k">}</span>/lib/cpu_gpu_dpcpp
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CCL_ROOT</span><span class="k">}</span>/include/cpu_gpu_dpcpp
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CCL_ROOT</span><span class="k">}</span>/lib/pkgconfig:
<span class="c"># CLCK</span>
<span class="nv">_CLCK_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/clck/2021.4.0
<span class="nv">_INTEL_LICENSE_FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">_INTEL_LICENSE_FILE</span><span class="k">}</span>:<span class="k">${</span><span class="nv">_CLCK_ROOT</span><span class="k">}</span>/licensing
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CLCK_ROOT</span><span class="k">}</span>/bin/intel64:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CLCK_ROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPLUS_INCLUDE_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CLCK_ROOT</span><span class="k">}</span>/include
<span class="nv">_MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CLCK_ROOT</span><span class="k">}</span>/man
<span class="c"># COMPILER</span>
<span class="nv">_CMPLR_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/compiler/2021.4.0
<span class="nv">_OCL_ICD_FILENAMES</span><span class="o">=</span>libintelocl_emu.so:libalteracl.so:<span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/lib/x64/libintelocl.so
<span class="nv">_ACL_BOARD_VENDOR_PATH</span><span class="o">=</span>/opt/Intel/OpenCLFPGA/oneAPI/Boards
<span class="nv">_FPGA_VARS_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/lib/oclfpga
<span class="nv">_FPGA_VARS_ARGS</span><span class="o">=</span>
<span class="nv">_INTELFPGAOCLSDKROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_DIR</span><span class="k">}</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/bin/intel64:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_DIR</span><span class="k">}</span>/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PATh</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_DIR</span><span class="k">}</span>/llvm/aocl-bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/compiler/lib/intel64_lin:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_DIR</span><span class="k">}</span>/linux64/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_DIR</span><span class="k">}</span>/host/linux64/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/lib/emu:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/lib/x64:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/lib:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/compiler/lib/intel64_lin:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/linux/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="nv">_MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>/documentation/en/man/common:<span class="k">${</span><span class="nv">_MANPATH</span><span class="k">}</span>
<span class="c">## DAL</span>
<span class="nv">_DALROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/dal/2021.4.0
<span class="nv">_DAALROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="nv">_CLASSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>/lib/onedal.jar
<span class="nv">_CMAKE_PREFIX_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>
<span class="c">## debugger</span>
<span class="nv">_INTEL_PYTHONHOME</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/debugger/10.2.4/dep
<span class="nv">_INFOPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/debugger/10.2.4/gdb/intel64/lib
<span class="nv">_GDB_INFO</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/debugger/10.2.4/documentation/info/
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/debugger/10.2.4/gdb/intel64/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_INTEL_PYTHONHOME</span><span class="k">}</span>/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/debugger/10.2.4/libipt/intel64/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_INFOPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/debugger/10.2.4/documentation/man:<span class="k">${</span><span class="nv">_MANPATH</span><span class="k">}</span>
<span class="c">## utilities</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/dev-utilities/2021.4.0/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/dev-utilities/2021.4.0/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="c">## DNNL</span>
<span class="nv">_DNNLROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/dnnl/2021.4.0/cpu_dpcpp_gpu_dpcpp
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DNNLROOT</span><span class="k">}</span>/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DNNLROOT</span><span class="k">}</span>/lib:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DNNLROOT</span><span class="k">}</span>/lib:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="c">## DPCT</span>
<span class="nv">_DPCT_BUNDLE_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/dpcpp-ct/2021.4.0
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DPCT_BUNDLE_ROOT</span><span class="k">}</span>/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DPCT_BUNDLE_ROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="c">## DPL</span>
<span class="nv">_DPL_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/dpl/2021.5.0
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DPL_ROOT</span><span class="k">}</span>/linux/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_DPL_ROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="c">## INSPECTOR</span>
<span class="nv">_INSPECTOR_2021_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/inspector/2021.4.0
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_INSPECTOR_2021_DIR</span><span class="k">}</span>/bin64:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_INSPECTOR_2021_DIR</span><span class="k">}</span>/include/pkgconfig/lib64:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="c">## CONDA</span>
<span class="nv">_CONDA_PREFIX</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/intelpython/latest
<span class="nv">_CONDA_EXE</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PREFIX</span><span class="k">}</span>/bin/conda
<span class="nv">_CONDA_PYTHON_EXE</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PREFIX</span><span class="k">}</span>/bin/python
<span class="nv">_CONDA_DEFAULT_ENV</span><span class="o">=</span>intelpython-python3.7
<span class="nv">_CONDA_PROMPT_MODIFIER</span><span class="o">=(</span>intelpython-python3.7<span class="o">)</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PREFIX</span><span class="k">}</span>/condabin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PREFIX</span><span class="k">}</span>/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="c">## IPP</span>
<span class="nv">_IPPROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/ipp/2021.4.0
<span class="nv">_IPP_TARGET_ARCH</span><span class="o">=</span>intel64
<span class="nv">_IPPCRYPTOROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/ippcp/2021.4.0
<span class="nv">_IPPCP_TARGET_ARCH</span><span class="o">=</span>intel64
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPCRYPTOROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPCRYPTOROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPCRYPTOROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPCRYPTOROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="c"># VT</span>
<span class="nv">_VT_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/itac/2021.4.0
<span class="nv">_VT_MPI</span><span class="o">=</span>impi4
<span class="nv">_VT_LIB_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ROOT</span><span class="k">}</span>/lib
<span class="nv">_VT_SLIB_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ROOT</span><span class="k">}</span>/slib
<span class="nv">_VT_ADD_LIBS</span><span class="o">=</span><span class="s2">"-ldwarf -lelf -lvtunwind -lm -lpthread"</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ROOT</span><span class="k">}</span>/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ROOT</span><span class="k">}</span>/slib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ROOT</span><span class="k">}</span>/man:<span class="k">${</span><span class="nv">_MANPATH</span><span class="k">}</span>
<span class="c"># MKL</span>
<span class="nv">_MKLROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/mkl/2021.4.0
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>/bin/intel64:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>/lib/intel64:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_NLSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>/lib/intel64/locale/%l_%t/%N:
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="c"># MPI</span>
<span class="nv">_I_MPI_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/mpi/2021.4.0
<span class="nv">_FI_PROVIDER_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/libfabric/lib/prov:/usr/lib64/libfabric
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/libfabric/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/lib/release:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/libfabric/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/lib:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/lib/release:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/libfabric/lib:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/man:<span class="k">${</span><span class="nv">_MANPATH</span><span class="k">}</span>
<span class="nv">_CLASSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>/lib/mpi.jar:<span class="k">${</span><span class="nv">_CLASSPATH</span><span class="k">}</span>
<span class="c"># TBB</span>
<span class="nv">_TBBROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/tbb/2021.4.0/
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_TBBROOT</span><span class="k">}</span>/lib/intel64/gcc4.8:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_TBBROOT</span><span class="k">}</span>/lib/intel64/gcc4.8:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_TBBROOT</span><span class="k">}</span>/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_TBBROOT</span><span class="k">}</span>/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="nv">_CMAKE_PREFIX_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_TBBROOT</span><span class="k">}</span>:<span class="k">${</span><span class="nv">_CMAKE_PREFIX_PATH</span><span class="k">}</span>
<span class="c"># VPL</span>
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vpl/2021.6.0/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vpl/2021.6.0/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vpl/2021.6.0/lib:<span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>
<span class="nv">_CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vpl/2021.6.0/include:<span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vpl/2021.6.0/lib/pkgconfig:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="nv">_CMAKE_PREFIX_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vpl/2021.6.0:<span class="k">${</span><span class="nv">_CMAKE_PREFIX_PATH</span><span class="k">}</span>
<span class="c"># VTUNE</span>
<span class="nv">_VTUNE_PROFILER_2021_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>/vtune/2021.7.1
<span class="nv">_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_VTUNE_PROFILER_2021_DIR</span><span class="k">}</span>/bin64:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_VTUNE_PROFILER_2021_DIR</span><span class="k">}</span>/include/pkgconfig/lib64:<span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>

<span class="c"># personal build</span>
<span class="nv">_PATH</span><span class="o">=</span>/usr/local/intel/bin:<span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>
<span class="nv">_LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/intel/lib:<span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span></code></pre></figure>
<p>
読み込み
</p>
<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#! /bin/zsh</span>
<span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="nv">$HOME</span>/.config/intel <span class="o">]</span> <span class="o">||</span> rsync <span class="nt">-auvz</span> <span class="nv">$HOME</span>/.config/intel <span class="nv">$HOME</span>/
set_intel_vars
<span class="c">## valiables</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">ONEAPI_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_ONEAPI_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">SETVARS_VARS_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_SETVARS_VARS_PATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">ADVISOR_2021_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_ADVISOR_2021_DIR</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">APM</span><span class="o">=</span><span class="k">${</span><span class="nv">_APM</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CCL_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_CCL_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CCL_CONFIGURATION</span><span class="o">=</span><span class="k">${</span><span class="nv">_CCL_CONFIGURATION</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CLCK_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_CLCK_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INTEL_LICENSE_FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">_INTEL_LICENSE_FILE</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CMPLR_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_CMPLR_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">OCL_ICD_FILENAMES</span><span class="o">=</span><span class="k">${</span><span class="nv">_OCL_ICD_FILENAMES</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">ACL_BOARD_VENDOR_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_ACL_BOARD_VENDOR_PATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">FPGA_VARS_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_DIR</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">FPGA_VARS_ARGS</span><span class="o">=</span><span class="k">${</span><span class="nv">_FPGA_VARS_ARGS</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INTELFPGAOCLSDKROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_INTELFPGAOCLSDKROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">DALROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_DALROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">DAALROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_DAALROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">DAL_MAJOR_BINARY</span><span class="o">=</span>1
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">DAL_MINOR_BINARY</span><span class="o">=</span>1
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INTEL_PYTHONHOME</span><span class="o">=</span><span class="k">${</span><span class="nv">_INTEL_PYTHONHOME</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INFOPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_INFOPATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">GDB_INFO</span><span class="o">=</span><span class="k">${</span><span class="nv">_GDB_INFO</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">DNNLROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_DNNLROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">DPCT_BUNDLE_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_DPCT_BUNDLE_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INSPECTOR_2021_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_INSPECTOR_2021_DIR</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CONDA_PREFIX</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PREFIX</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CONDA_EXE</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_EXE</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CONDA_PYTHON_EXE</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PYTHON_EXE</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CONDA_SHLVL</span><span class="o">=</span>1
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CE_M</span><span class="o">=</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CE_CONDA</span><span class="o">=</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CONDA_DEFAULT_ENV</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_DEFAULT_ENV</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CONDA_PROMPT_MODIFIER</span><span class="o">=</span><span class="k">${</span><span class="nv">_CONDA_PROMPT_MODIFIER</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">IPPROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">IPP_TARGET_ARCH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPP_TARGET_ARCH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">IPPCRYPTOROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPCRYPTOROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">IPPCP_TARGET_ARCH</span><span class="o">=</span><span class="k">${</span><span class="nv">_IPPCP_TARGET_ARCH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">VT_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">VT_MPI</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_MPI</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">VT_LIB_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_LIB_DIR</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">VT_SLIB_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_SLIB_DIR</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">VT_ADD_LIBS</span><span class="o">=</span><span class="k">${</span><span class="nv">_VT_ADD_LIBS</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">MKLROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_MKLROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">I_MPI_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_I_MPI_ROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">FI_PROVIDER_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_FI_PROVIDER_PATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">TBBROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">_TBBROOT</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">VTUNE_PROFILER_2021_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">_VTUNE_PROFILER_2021_DIR</span><span class="k">}</span>
<span class="c">## PATH</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CLASSPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_CPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">CPATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INFOPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_INFOPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">INFOPATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_LD_LIBRARY_PATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_LIBRARY_PATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">LIBRARY_PATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_MNAPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">MANPATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">NLSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_NLSPATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">NLSPATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_PATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">PATH</span><span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">_PKG_CONFIG_PATH</span><span class="k">}</span>:<span class="k">${</span><span class="nv">PKG_CONFIG_PATH</span><span class="k">}</span>
<span class="c"># typeset -gx NONRPM_DB_DIR=$HOME/.intel</span>

<span class="nb">typeset</span> <span class="nt">-U</span> classpath cpath infopath ld_library_path library_path
<span class="nb">typeset</span> <span class="nt">-U</span> manpath lnspath path pkg_config_path

<span class="c">## complete</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">SETVARS_COMPLETED</span><span class="o">=</span>1</code></pre></figure>
<p>
読み込んだ設定をクリア
</p>
<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#! /bin/zsh</span>
<span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="nv">$HOME</span>/intel <span class="o">]</span> <span class="o">||</span> rsync <span class="nt">-auvz</span> <span class="nv">$HOME</span>/intel/ <span class="nv">$HOME</span>/.config/intel/
<span class="nb">rm</span> <span class="nt">-fr</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/intel
<span class="c">## clear PATH...</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">INFOPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">INFOPATH</span><span class="p">//</span><span class="nv">$_INFOPATH</span>:<span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="p">//</span><span class="nv">$_CLASSPATH</span>:<span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">CPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">CPATH</span><span class="p">//</span><span class="nv">$_CPATH</span>:<span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="p">//</span><span class="nv">$_LD_LIBRARY_PATH</span>:<span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">LIBRARY_PATH</span><span class="o">=</span><span class="k">${</span><span class="nv">LIBRARY_PATH</span><span class="p">//</span><span class="nv">$_LIBRARY_PATH</span>:<span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">MANPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">MANPATH</span><span class="p">//</span><span class="nv">$_MNAPATH</span>:<span class="k">}</span>
<span class="nb">typeset</span> <span class="nt">-gx</span> <span class="nv">NLSPATH</span><span class="o">=</span><span class="k">${</span><span class="nv">NLSPATH</span><span class="p">//</span><span class="nv">$_NLSPATH$}</span><span class="p">
typeset -gx PATH=</span><span class="k">${</span><span class="nv">PATH</span><span class="p">//</span><span class="nv">$_PATH</span>:<span class="k">}</span><span class="p">
typeset -gx PKG_CONFIG_PATH=</span><span class="k">${</span><span class="nv">PKG_CONFIG_PATH</span><span class="p">//</span><span class="nv">$_PKG_CONFIG_PATH</span>:<span class="k">}</span><span class="p">
# update
typeset -U infopath classpath cpath ld_library_path library_path
typeset -U manpath nlspath path pkg_config_path
## unset vars
unset ONEAPI_ROOT
unset SETVARS_VARS_PATH
unset ADVISOR_2021_DIR
unset APM
unset CCL_ROOT
unset CCL_CONFIGURATION
unset CLCK_ROOT
unset INTEL_LICENSE_FILE
unset CMPLR_ROOT
unset OCL_ICD_FILENAMES
unset ACL_BOARD_VENDOR_PATH
unset FPGA_VARS_DIR
unset FPGA_VARS_ARGS
unset INTELFPGAOCLSDKROOT
unset DALROOT
unset DAALROOT
unset DAL_MAJOR_BINARY
unset DAL_MINOR_BINARY
unset INTEL_PYTHONHOME
unset INFOPATH
unset GDB_INFO
unset DNNLROOT
unset DPCT_BUNDLE_ROOT
unset INSPECTOR_2021_DIR
unset CONDA_PREFIX
unset CONDA_EXE
unset CONDA_PYTHON_EXE
unset CONDA_SHLVL
unset CE_M
unset CE_CONDA
unset CONDA_DEFAULT_ENV
unset CONDA_PROMPT_MODIFIER
unset IPPROOT
unset IPP_TARGET_ARCH
unset IPPCRYPTOROOT
unset IPPCP_TARGET_ARCH
unset VT_ROOT
unset VT_MPI
unset VT_LIB_DIR
unset VT_SLIB_DIR
unset VT_ADD_LIBS
unset MKLROOT
unset I_MPI_ROOT
unset FI_PROVIDER_PATH
unset TBBROOT
unset VTUNE_PROFILER_2021_DIR
## cleanup working vars
unset _ONEAPI_ROOT
unset _SETVARS_VARS_PATH
unset _ADVISOR_2021_DIR
unset _APM
unset _CCL_ROOT
unset _CCL_CONFIGURATION
unset _CLCK_ROOT
unset _INTEL_LICENSE_FILE
unset _CMPLR_ROOT
unset _OCL_ICD_FILENAMES
unset _ACL_BOARD_VENDOR_PATH
unset _FPGA_VARS_DIR
unset _FPGA_VARS_ARGS
unset _INTELFPGAOCLSDKROOT
unset _DALROOT
unset _DAALROOT
unset _DAL_MAJOR_BINARY
unset _DAL_MINOR_BINARY
unset _INTEL_PYTHONHOME
unset _INFOPATH
unset _GDB_INFO
unset _DNNLROOT
unset _DPCT_BUNDLE_ROOT
unset _INSPECTOR_2021_DIR
unset _CONDA_PREFIX
unset _CONDA_EXE
unset _CONDA_PYTHON_EXE
unset _CONDA_SHLVL
unset _CE_M
unset _CE_CONDA
unset _CONDA_DEFAULT_ENV
unset _CONDA_PROMPT_MODIFIER
unset _IPPROOT
unset _IPP_TARGET_ARCH
unset _IPPCRYPTOROOT
unset _IPPCP_TARGET_ARCH
unset _VT_ROOT
unset _VT_MPI
unset _VT_LIB_DIR
unset _VT_SLIB_DIR
unset _VT_ADD_LIBS
unset _MKLROOT
unset _I_MPI_ROOT
unset _FI_PROVIDER_PATH
unset _TBBROOT
unset _VTUNE_PROFILER_2021_DIR
## cleanup
unset SETVARS_COMPLETED</span></code></pre></figure>
<p>
公式で切り替え(というか, 汚した環境変数の消去)も提供してくれないモンかねぇ.
</p>
</div>
</div>
</div>
<div>
<h3 id="org4c224bed">NetCDF</h3>
<div class="outline-text-3" id="text-org4c224bed">
<p>
依存するモノが多くてなかなか大変.
</p>

<p>
圧縮に <del>szip</del> libaec, zlib, 仮想の I/O に HDF5, その上に NetCDF というソフトウェア構造
この順にインストールしていく.
</p>
</div>
<div>
<h4 id="org7e100925">szip -&gt; libaec</h4>
<div class="outline-text-4" id="text-org7e100925">
<p>
BSD-2-Clause の szip の互換ソフトウェアとして<a href="https://gitlab.dkrz.de/k202009/libaec">libeac</a>がリリースされている.
</p>
<blockquote>
<p>
"Please be aware that SZIP compression has been replaced by AEC
compression as of HDF5-1.10.7. AEC is the open source version of
SZIP."
</p>
<ul class="org-ul">
<li><a href="https://portal.hdfgroup.org/display/HDF5/Szip+Compression+in+HDF+Products">szip compression in HDF products</a></li>
</ul>
</blockquote>
<p>
というわけで, libeac を導入する.
同梱されている <code>INSTALL.md</code> に導入方法があるので,
基本はこれの通りに.
</p>
<pre class="example">
% sudo apt install gnulib
% wget https://gitlab.dkrz.de/k202009/libaec/-/archive/v1.0.6/libaec-v1.0.6.tar.gz
% tar xvf libaec-v1.0.6.tar.gz
% cd libeac-v1.0.6
% gnulib-tool --import lib-symbol-visibility
% autoreconf -iv
% mkdir build
% cd build
% AR=xiar LD=xild \
  CC=icc \
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large" \
  ../configure --prefix=/usr/local/intel
% make
% make check
% make install
</pre>
</div>
</div>
<div>
<h4 id="org8cce54bf">zlib</h4>
<div class="outline-text-4" id="text-org8cce54bf">
<pre class="example">
% wget https://zlib.net/zlib-1.2.11.tar.gz
% tar xvf zlib-1.2.11.tar.gz
% cd zlib-1.2.11
% mkdir build
% cd build
% AR=xiar LD=xild \
  CC=icc \
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large" \
  ../configure --prefix=/usr/local/intel
% make
% make test
% make install
# /usr/local/intel/lib/libz.so* は消しても OK.
</pre>
</div>
</div>
<div>
<h4 id="orgfd836615">HDF5</h4>
<div class="outline-text-4" id="text-orgfd836615">
<p>
あいかわらず, ダウンロードリンクは直接叩けないので
おとなしく Web の URL をポチっとして落としてくる.
</p>

<p>
hdf5 v1.12 には以前の版と非互換の変更があるため, 互換APIを有効にしてビルドすることに.
NetCDF側では<a href="https://github.com/Unidata/netcdf-c/pull/2044">対応済み</a>みたいだけれど, これリリースされてるのかな….
</p>

<p>
必要なのは C API だけなので, 素のビルドで OK.
ビルドもテストもかなり時間がかかるので, 適宜休憩挟みつつ進めると良いかと.
</p>
<pre class="example">
% tar xvf hdf5-1.12.1.tar.gz
% cd hdf5-1.12.1
% mkdir build
% cd build
% AR=xiar LD=xild \
  CXX=icpc \
  FC=ifort \
  CC=icc \
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  LIBS="-L/usr/local/intel/lib -laec" \
  ../configure \
    --prefix=/usr/local/intel \
    --with-zlib=/usr/local/intel/lib \
    --with-szlib=/usr/local/intel/lib \
    --enable-hl \
    --with-default-api-version=v110
% make
% make check
% make install
% make check-install
</pre>
</div>
</div>
<div>
<h4 id="orgfea0c1d5">NetCDF C</h4>
<div class="outline-text-4" id="text-orgfea0c1d5">
<p>
HDF5 の後に NetCDF C ライブラリを導入
(OPeNDAP を利用する気は無いので, curl は不要).
</p>

<p>
static でビルドする際には
HDF5 のインストール時に生成された C コンパイラの wrapper である
<code>h5cc</code> の中身を見て, 設定されているライブラリの情報を適宜
<code>LIBS</code> に指定すると良い.
<code>libhdf5.settings</code> の中身も参考になるかと.
</p>

<p>
雑にやるなら <code>CC</code> に <code>h5cc</code> を指定する, という方法もあるが,
今後 <code>nc-config</code> の出力を使って他のライブラリをビルドしたりすることを考えたりすると,
真面目(?)に configure を走らせた方が良い気がする.
</p>
<pre class="example">
% wget https://github.com/Unidata/netcdf-c/archive/refs/tags/v4.8.1.tar.gz \
  -O netcdf-c-4.8.1.tar.gz
% tar xvf netcdf-c-4.8.1.tar.gz
% cd netcdf-c-4.8.1
% mkdir build
% cd build
% AR=xiar LD=xild \
  CC=icc
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  LIBS="-L/usr/local/intel/lib -lhdf5_hl -lhdf5 -lsz -lz-laec" \
  ../configure \
  --prefix=/usr/local/intel \
  --disable-dap
% make
% make check
% make install
</pre>
</div>
</div>
<div>
<h4 id="orgaba91f54">NetCDF Fortran</h4>
<div class="outline-text-4" id="text-orgaba91f54">
<p>
C版同様に LIBS に必要なライブラリを列挙するのを忘れずに.
</p>
<pre class="example">
% wget https://github.com/Unidata/netcdf-fortran/archive/refs/tags/v4.5.3.tar.gz -O netcdf-fortran-4.5.3.tar.gz
% tar xvf netcdf-fortran-4.5.3.tar.gz
% cd netcdf-fortran-4.5.3
% mkdir build
% cd build
% AR=xiar LD=xild \
  CC=icc \
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  FC=ifort
  FCFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  F77=ifort
  FFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  LIBS="-L/usr/local/intel/lib -lnetcdf -lhdf5_hl -lhdf5 -lsz -lz -laec"
  ../configure \
  --prefix=/usr/local/intel \
  --disable-dap
% make
% make check
% make install
</pre>
</div>
</div>
</div>
<div>
<h3 id="orgc15a8fa6">gtool5</h3>
<div class="outline-text-3" id="text-orgc15a8fa6">
</div>
<div>
<h4 id="org0e8a1bdc">gtool5: 20160613版</h4>
<div class="outline-text-4" id="text-org0e8a1bdc">
<p>
現在の「安定版」は configure を直す前の版なので,
一度 configure を走らせた後に手動で <code>Config.mk</code> の修正が必要である.
</p>
<pre class="example">
% wget http://www.gfd-dennou.org/library/gtool/gtool5/gtool5_current.tgz
% tar xvf gtool5_current.tgz
% cd gtool5-20160613/
% AR=xiar LD=xild \
  FC=mpiifort \
  SYSFFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  ./configure \
    --with-netcdff=/usr/local/stow/intel/lib/libnetcdff.so \
    --with-netcdf=/usr/local/stow/intel/lib/libnetcdf.so \
    --with-mpiexec=mpiexec
# Config.mk の修正, 該当行は以下(修正後)
SYSFFLAGS=-O3 -xHost -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include  -I/opt/intel/oneapi/mpi/2021.4.0//include -I/opt/intel/oneapi/mpi/20
21.4.0/include
SYSLDFLAGS=-L/usr/local/intel/lib -L/opt/intel/oneapi/mpi/2021.4.0/lib/release -L/opt/intel/oneapi/mpi/2021.4.0/lib
SYSLDLIBS=-lnetcdff -lnetcdf -lhdf5_hl -lhdf5 -lsz -lz -laec -lmpifort -lmpi -ldl -lrt -lpthread
% make
% make test
% make test-mpi
</pre>
<p>
そのままコレを使う場合は <code>make install</code> しておく.
</p>
</div>
</div>
<div>
<h4 id="org7b600054">gtool5: GIT HEAD</h4>
<div class="outline-text-4" id="text-org7b600054">
<p>
<code>configure</code> 周りを全面的に書き替えているので
よくある変数を指定するだけで良い.
</p>
<figure class="highlight"><pre><code class="language-nil" data-lang="nil">% git clone https://www.gfd-dennou.org/library/gtool/git_repos/gtool5.git
% cd gtool5
% git submodule update --init
% ./autogen.sh
% mkdir build
% cd build
% AR=xiar LD=xild \
  CPP="gcc -E" \
  CC=mpiicc \
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  FC=mpiifort \
  FCFLAGS="-fPIC -O3 -xCORE-AVX2 -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  LIBS="-L/usr/local/intel/lib -lnetcdf -lhdf5_hl -lhdf5 -lsz -lz -laec" \
  ../configure \
  --prefix=/usr/local/intel \
  --with-nf-config=/usr/local/intel/bin/nf-config
% make
% make test</code></pre></figure>
<p>
こちらを使う場合は <code>make install</code> まで行なう.
</p>
</div>
</div>
</div>
<div>
<h3 id="org667b1d64">SPML: v0.8.0</h3>
<div class="outline-text-3" id="text-org667b1d64">
</div>
<div>
<h4 id="org25081b44">ISPACK: v1</h4>
<div class="outline-text-4" id="text-org25081b44">
<pre class="example">
% wget https://www.gfd-dennou.org/arch/ispack/ispack-1.0.4.tar.gz
% tar xvf ispack-1.0.4.tar.gz
% cd ispack-1.0.4
% vim Mkinclude    # 以下を修正
FC              = ifort
FFLAGS          = -fPIC -O3 -xCORE-AVX2 -qopenmp -prec-div -fp-model precise -align array64byte
MPIFC           = mpiifort
MPIFFLAGS       = $(FFLAGS)
CC              = mpiicc
CFLAGS          = -fPIC -O3 -xCORE-AVX2 -qopenmp -prec-div -fp-model precise
CPPFLAGS        = -DDIRECT -DFORMAT -DIEEE -DASCII -DLEN
SSE             = avx
# NVCC          = nvcc
# NVCFLAGS      = -arch=sm_20 -O3
% make
% cp libisp.a /usr/local/intel/lib/
</pre>
</div>
</div>
<div>
<h4 id="org7e2953ea">SPML: v0.8.0</h4>
<div class="outline-text-4" id="text-org7e2953ea">
<p>
リリースの tar.gz 生成に利用した環境が古い(libtool が古い)ので,
そのままでは intel compiler に渡す <code>-rpath</code> のフラグが変になる.
<code>configure</code> 実行前に <code>autoreconf -fi</code> で <code>configure</code> を生成する必要がある.
</p>
<pre class="example">
% wget https://www.gfd-dennou.org/library/spmodel/spml_current.tar.gz
% tar xvf spml_current.tar.gz
% cd spml-0.8.0
% autoreconf -fi
% AR=xiar LD=xild CPP="gcc -E" \
  CC=mpiicc \
  CFLAGS="-fPIC -O3 -xCORE-AVX2 -qopenmp -prec-div -fp-model precise -mcmodel=large -I/usr/local/intel/include" \
  FC=mpiifort \
  FCFLAGS="-fPIC -O3 -xCORE-AVX2 -qopenmp -prec-div -fp-model precise -mcmodel=large -align array64byte -I/usr/local/intel/include -I${MKLROOT}/include " \
  LIBS="-L/usr/local/intel/lib -lnetcdff -lnetcdf -lhdf5_hl -lhdf5 -lsz -lz -laec -L${MKLROOT}/lib/intel64 -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -lpthread -lifcore" \
  ../configure \
  --prefix=/usr/local/intel \
  --with-ispack=/usr/local/intel/lib/libisp.a \
  --with-netcdff=/usr/local/intel/lib/libnetcdff.a \
  --with-netcdf=/usr/local/intel/lib/libnetcdf.a \
  --with-gtool5=/usr/local/intel/lib/libgtool.a \
  --with-mpifc=mpiifort \
  --with-mpiexec=mpiexec \
  --with-lapack=${MKLROOT}/lib/intel64/libmkl_lapack95_lp64.a
% make
% make test
</pre>
<p>
これを使うなら <code>make install</code> する.
</p>
</div>
</div>
</div>
<div>
<h3 id="orgb7f9c663">
<span class="todo TODO">TODO</span> SPML: v2 (Git HEAD)</h3>
<div class="outline-text-3" id="text-orgb7f9c663">
</div>
<div>
<h4 id="org7350e806">ISPACK v3</h4>
<div class="outline-text-4" id="text-org7350e806">
</div>
</div>
</div>
</div>

        </div>
      </main>
      <a href="#" class="back_to_top">Back to Top &#9650;</a>
      <hr/>
      <footer>
        <p>&copy; 2006-2021
  <a href="mailto:uwabami@gfd-dennou.org">Youhei SASAKI</a>,
  Lastupdate: 2021-10-07 08:39:57 +0000
  <br/>
  Powered by
  <a href="https://orgmode.org/" rel="noopener" title="Org mode">
    Org mode
  </a>
  +
  <a href="https://jekyllrb.com/" rel="noopener" title="Jekyll">
    Jekyll
  </a>
  +
  <a href="https://picocss.com/" rel="noopener" title="pico.css">
    Pico.css
  </a>
  &amp;
  <a href="https://amp.dev/">
    <span class="icon-amp">⚡</span>AMP
  </a>
</p>

      </footer>
    </div>
    <amp-analytics data-block-on-consent
               type="googleanalytics"
               config="https://uwabami.github.io/assets/ga4.json"
               data-credentials="include"
		       data-block-on-consent>
  <script type="application/json">
    {
        "vars": {
            "GA4_MEASUREMENT_ID": "G-CLB2VW9XEW",
            "GA4_ENDPOINT_HOSTNAME": "www.google-analytics.com",
            "DEFAULT_PAGEVIEW_ENABLED": true,
            "GOOGLE_CONSENT_ENABLED": true,
            "WEBVITALS_TRACKING": false,
            "PERFORMANCE_TIMING_TRACKING": false
        }
    }
  </script>
</amp-analytics>

  </body>
</html>
